<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Music Blocks is a collection of tools for exploring musical concepts.</title>

    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
    <link rel="stylesheet" href="css/activity.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/keyboard.css">

    <noscript>
    Javascript is required to view this page.
    </noscript>

    <script src="js/utils/detectIE.js">
    </script>

    <script src="sounds/samples/manifest.js">
    </script>

    <script src="lib/mespeak.js">
    </script>

    <script src="lib/reqwest.js">
    </script>

    <script src="lib/jquery-2.1.4.js">
    </script>

    <script src="lib/jquery-ui.js">
    </script>

    <script src="lib/webL10n.js">
    </script>

    <script src="lib/Tone.min.js">
    </script>

    <script src="lib/jquery.ruler.js">
    </script>

    <script src="lib/modernizr-2.6.2.min.js">
    </script>

    <script src="lib/recorder.js">
    </script>

    <script src="lib/raphael.min.js">
    </script>

    <script src="lib/wheelnav.js">
    </script>
    
    <link rel="prefetch" type="application/l10n" href="./localization.ini">

    <script data-main="js/loader" src="lib/require.js">
    </script>

    <link rel="manifest" href="android_chrome_manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="favicon.ico">
    <meta id="theme-color" name="theme-color" content="#2196F3">

    <script src="lib/easeljs.min.js">
    </script>

    <script src="lib/tweenjs.min.js">
    </script>

    <script src="js/widgets/musickeyboard.js">
    </script>

    <!--
    <script src="lib/movieclip-0.7.1.min.js">
    </script>
    -->

    <script>
      var canvas, stage, exportRoot;
      function init() {
        canvas = document.getElementById("canvas");
        // exportRoot = new lib.SugarAnimation();
        stage = new createjs.Stage(canvas);
        // stage.addChild(exportRoot);
        stage.update();
        // createjs.Ticker.setFPS(lib.properties.fps);
        createjs.Ticker.addEventListener("tick", stage);
      }
    </script>

    <script>
      if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
              navigator.serviceWorker.register('sw.js').then(function(registration) {
                  // Registration was successful
                  console.log('ServiceWorker registration successful with scope: ', registration.scope);
              }).catch(function(err) {
                  // registration failed :(
                  console.log('ServiceWorker registration failed: ', err);
              });
          });
      }
    </script>

  </head>

  <body onload="init();" data-title="index" id="body" style="background: #96D3F3;">
    <div id="loading-image-container" style="position: absolute; width: 100%; height: 100%;">
      <img src='loading-animation.gif' style="max-width:90%; width: 1024px; margin: auto; display: block; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"/>
    </div>

    <script>
      (function($) {
        $.fn.fixMe = function() {
            return this.each(function() {
                var $this = $(this), $t_fixed;

                function init() {
                    $this.wrap('<div class="container" />');
                    $t_fixed = $this.clone();
                    $t_fixed.find("tbody").remove().end().addClass("fixed").insertBefore($this);
                    resizeFixed();
                };

                function resizeFixed() {
                    $t_fixed.find("th").each(function(index) {
                        $(this).css("width", $this.find("th").eq(index).outerWidth() + "px");
                    });
                };

                function scrollFixed() {
                    var offset = $(this).scrollTop(), tableOffsetTop = $this.offset().top, tableOffsetBottom = tableOffsetTop + $this.height() - $this.find("thead").height();

                    if (offset < tableOffsetTop || offset > tableOffsetBottom) {
                        $t_fixed.hide();
                    } else if (offset >= tableOffsetTop && offset <= tableOffsetBottom && $t_fixed.is(":hidden")) {
                        $t_fixed.show();
                    }
                };

                $(window).resize(resizeFixed);
                $(window).scroll(scrollFixed);
                init();
            });
        };
      })(jQuery);

      $(document).ready(function() {
        $("solfa").fixMe();
        $(".up").click(function() {
            $('html, body').animate({
                scrollTop: 0
            }, 2000);
        });
      });

      var isDragging = false;
    </script>

    <canvas id="canvas" width="3790" height="1743"style="background-color:#92B5C8; width:100%">
    </canvas>

    <!--hidden at the beginning whilst everything loads-->
    <div id="hideContents" style="display: none;">
      <div class="canvasHolder" id="canvasHolder">
        <canvas id="myCanvas" width="1200" height="900">
        </canvas>

        <canvas id="overlayCanvas" width="1200" height="900" style="position:absolute;pointer-events:none;left:0;top:0;z-index:-100;visibility:hidden;">
        </canvas>

        <canvas id="myChart" width="600" height="600">
        </canvas>

        <video id="camVideo" style="visibility:hidden;">
        </video>

        <canvas id="camCanvas" style="visibility:hidden;">
        </canvas>

        <div id="languageDiv">
        </div>

        <div id="labelDiv">
        </div>

        <div id="textLabel">
        </div>

        <div id="ioDiv" style="display:none">
          <input tabindex="-1" class="file" type="file" id="myMedia" accept="image/*">
          <input tabindex="-1" class="file" type="file" id="myOpenFile" accept=".ta, .tb, .html">
          <input tabindex="-1" class="file" type="file" id="myOpenPlugin" accept=".json">
          <input tabindex="-1" class="file" type="file" id="myOpenAll">
        </div>
      </div> <!-- canvasHolder -->

      <div id="audio">
      </div>

      <div id="tourData">
      </div>

      <div id="popdown-palette">
      </div>

      <div id="main-toolbar" class="toolbar">
      </div>

      <div id="loader">
      </div>

      <div id="header" class="EaselJS">
      </div>
      <iframe src="planet/index.html" id="planet-iframe" style="display: none;"></iframe>

      <div id="modeDiv" draggable="false">
        <div id="modeButtonsDiv">
        </div>

        <div id="modeTableDiv">
        </div>
      </div>

      <div id="statusDiv" draggable="false">
        <div id="statusButtonsDiv">
        </div>

        <div id="statusTableDiv">
        </div>
      </div>

      <div id="playbackDiv" draggable="false">
        <div id="playbackButtonsDiv">
        </div>

        <div id="playbackTableDiv">
        </div>
      </div>

      <div id="ptmDiv" draggable="false">
        <div id="ptmButtonsDiv">
        </div>

        <div id="ptmTableDiv">
        </div>
      </div>

      <div id="pdmDiv" draggable="false">
        <div id="pdmButtonsDiv">
        </div>

        <div id="pdmTableDiv">
        </div>
      </div>

      <div id="mkbDiv" draggable="false">
        <div id="mkbButtonsDiv">
        </div>

        <div id="mkbTableDiv">

          <div id="keyboardHolder" onload="setupKeyboard ()" style="display:none; bottom: 10px; left: 0px; height:155px; width: 100%; background-color: white;">
              <!--style="display: none;   is used if we do not want show that element -->
              <select id="firstNote" class="keySelect" style="display: none; onchange="changeKeys()">
                  <option value="C" selected>C</option>      
                  <!--selectors were defined in previous code as options for drop down. We are not using dropdown to select starting key. If we remove selectors, then we have to make drastic changes in JS code. So I have not removed selectors. Since we want keyboard to start from C4 hence C is selected. -->
                  <option value="D">D</option>               
                  <option value="E">E</option>
                  <option value="F">F</option>
                  <option value="G">G</option>
                  <option value="A">A</option>
                  <option value="B">B</option>
              </select>
              <input type="number" style="display: none; min="0" max="7" step="1" id="firstOctave" onchange="changeKeys()" value="4"/>  <!--C4 -->
              <select id="secondNote" class="keySelect" style="display: none; onchange="changeKeys()">
                  <option value="C">C</option>
                  <option value="D">D</option>
                  <option value="E">E</option>
                  <option value="F">F</option>
                  <option value="G" selected>G</option>          <!--because last key is G5 -->
                  <option value="A">A</option>
                  <option value="B">B</option>
              </select>
              <input type="number" style="display: none; min="2" max="8" step="1" id="secondOctave" onchange="changeKeys()" value="5"/>   <!--G5 -->
              <input type="button" style="display: none; value="Deselect all notes" onclick="deselect();" />
              <input type="button" style="display: none; value="Generate Pitch Blocks!" onclick="handleKeyboardPitches(selected); deselect();" /><br>
              <!--Actual Keyboard-->
              <div id="keyboard">
                  
                  <table class="white">
                      <tr id="white">
                           
                      </tr>
                  </table>
                  <table class="black">
                      <tr id="black">
                              
                      </tr>
                  </table>
              </div>
          </div>


          <div id="keyboardHolder2" onload="setupKeyboard ()" style="display:none; bottom: 10px; left: 0px; height:145px; width: 74%; background-color: white;">


            <!-- <table>
              <tr id="myrow">
                <td id="1">Hello</td>
              </tr>
                <tr>
                <td id="1">Hello</td>
              </tr>
                <tr>
                <td id="1">Hello</td>
              </tr>
            </table> -->


              <table class="white">
                  <tbody>
                    <tr id="myrow">
                 <!--     <td id="C4">C4</td>
                      <td id="D4">D4</td>
                      <td id="E4">E4</td>
                      <td id="F4">F4</td>
                      <td id="G4">G4</td> 
                      <td id="A4">A4</td>
                      <td id="B4">B4</td>
                      <td id="C5">C5</td>
                      <td id="D5">D5</td> -->
                    </tr>
                  </tbody>
                </table>


                <table class="black">
                  <tbody>
                    <tr id="myrow2">
               <!--       <td id="C♯4">C♯4</td>
                      <td id="D♯4">D♯4</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="F♯4">F♯4</td>
                      <td id="G♯4">G♯4</td>
                      <td id="A♯4">A♯4</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="C♯5">C♯5</td>
                      <td id="D♯5">D♯5</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="F♯5">F♯5</td> -->
                    </tr>
                  </tbody>
                </table>
                    


                <!-- <table class="black">
                  <tbody>
                    <tr id="black">
                      <td id="C♯4">C♯4</td>
                      <td id="D♯4">D♯4</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="F♯4">F♯4</td>
                      <td id="G♯4">G♯4</td>
                      <td id="A♯4">A♯4</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="C♯5">C♯5</td>
                      <td id="D♯5">D♯5</td>
                      <td style="visibility: hidden" id=""></td>
                      <td id="F♯5">F♯5</td>
                    </tr>
                  </tbody>
                </table> -->

              <div id="keyboard2">
                  <table class="white">
                      <tbody><tr id="white">
                           
                          </tr>
                      </tbody>
                  </table>
                  <table class="black">
                      <tbody><tr id="black">
                              
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>


        </div>
      </div>


      <div id="pscDiv" draggable="false">
        <div id="pscButtonsDiv">
        </div>

        <div id="pscTableDiv">
        </div>
      </div>

      <div id="timbreDiv" draggable="false">
        <div id="timbreButtonsDiv">
        </div>

        <div id="timbreTableDiv">
        </div>
      </div>

      <div id="tempoDiv" draggable="false">
        <div id="tempoButtonsDiv">
        </div>
      </div>

      <div id="rulerDiv" draggable="false">
        <div id="rulerButtonsDiv">
        </div>

        <div id="rulerTableDiv">
        </div>
      </div>

      <div id="sliderDiv" draggable="false">
        <div id="sliderButtonsDiv">
        </div>

        <div id="sliderTableDiv">
        </div>
      </div>

      <div id="playPitch" style="visibility:hidden">
      </div>

      <div id="sliderInCell">
      </div>

    







   



       
    



      <div id="BPMInput">
      </div>

      <div id="musicratio1">
      </div>

      <div id="musicratio2">
      </div>

      <div id="dissectNumber">
      </div>

      <div id="helpElem">
      </div>

      <div id="wheelDiv" class="wheelNav" style="background-size: contain;background-image: url(./images/gray.svg)">
      </div>

      <div id="searchBar">
         <input type="text" name="search" id="search" class="ui-autocomplete" placeholder="Search for Blocks">
         <ul class="matches" id="searchResults"></ul>
      </div>

      <div id="pastecode">
  <input type="text" name="paste" id="paste" class="ui-autocomplete" placeholder="Paste Music Blocks code here">
  <ul class="matches"></ul>
  <input onkeypress="doPaste()" type="submit" value="">
      </div>
      
      <div id="myProgress">
        <div id="myBar"></div>
      </div>

      <div id="lilypondModal" class="modal">

      <!-- Modal content for Lilypond save dialog -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <p><div id="fileNameText"></div><input type="text" id="fileName"></input></p>
        <p><div id="titleText"></div><input type="text" id="title"></input></p>
        <p><div id="authorText"></div><input type="text" id="author"></input></p>
        <p><div id="MIDIText"></div><input type="checkbox" id="MIDICheck"></input></p>
        <p><div id="guitarText"></div><input type="checkbox" id="guitarCheck"></input></p>
        <p><button id="submitLilypond"></button> <button id="submitPDF"></button></p>
      </div>

    </div>

    </div> <!-- hideContents -->

  </body>

</html>

const TACAT={'newnote':'note','rest2':'note','osctime':'note','turtlenote':'notefactor','rhythmicdot':'rhythm','tie':'rhythm','multiplybeatfactor':'rhythm','skipnotes':'rhythm','duplicatenotes':'rhythm','backward':'rhythm','setbpm':'rhythm','setmasterbpm':'rhythm','newswing2':'rhythm','drift':'rhythm','offbeatdo':'beat','onbeatdo':'beat','pickup':'rhythm','meter':'rhythm','matrix':'ignore','tuplet2':'ignore','simpletuplet':'ignore','rhythm':'ignore','rhythm2':'ignore','rhythmruler':'ignore','pitchstaircase':'ignore','pitchslider':'ignore','status':'ignore','pitchdrummatrix':'ignore','tempo':'ignore','modewidget':'ignore','timbre':'ignore','bpmfactor':'rhythmfactor','beatfactor':'rhythmfactor','skipfactor':'rhythmfactor','duplicationfactor':'rhythmfactor','measurevalue':'rhythmfactor','beatvalue':'rhythmfactor','notecounter':'rhythmfactor','mynotevalue':'rhythmfactor','elapsednotes':'rhythmfactor','elapsednotes2':'rhythmfactor','notename':'ignore','solfege':'ignore','drumname':'ignore','voicename':'ignore','modename':'ignore','eastindiansolfege':'ignore','filtertype':'ignore','oscillatortype':'ignore','hertz':'pitch','pitch':'pitch','steppitch':'pitch','sharp':'pitch','flat':'pitch','transpositionfactor':'transposefactor','consonantstepsizedown':'transposefactor','consonantstepsizeup':'transposefactor','mypitch':'transposefactor','turtlepitch':'transposefactor','number2pitch':'transposefactor','number2octave':'transposefactor','setpitchnumberoffset':'transposefactor','pitchnumber':'transposefactor','scaledegree':'transposefactor','steppitch':'transposefactor','settransposition':'transpose','invert':'transpose','invert1':'transpose','invert2':'transpose','diminished':'pitchchord','augmented':'pitchchord','perfect':'pitchchord','minor':'pitchchord','major':'pitchchord','interval':'pitchchord','staccatofactor':'tonefactor','sluffactor':'tonefactor','notevolumefactor':'tonefactor','key':'tonefactor','playdrum':'tone','settimbre':'tone','setkey':'tone','setkey2':'tone','setvoice':'tone','setdrum':'tone','articulation':'tone','setnotevolume2':'tone','setnotevolume':'tone','newstaccato':'tone','newslur':'tone','swing':'tone','crescendo':'tone','envelope':'tone','oscillatortype':'tone','filter':'tone','amsynth':'tone','fmsynth':'tone','duosynth':'tone','dis':'tone','tremolo':'tone','chorus':'tone','phaser':'tone','vibrato':'tone','clear':'forward','forward':'forward','back':'forward','left':'forward','right':'forward','arc':'arc','bezier':'arc','controlpoint1':'arc','controlpoint2':'arc','x':'coord','y':'coord','heading':'coord','setxy':'setxy','seth':'setxy','settranslucency':'pen','sethue':'pen','penup':'pen','setpensize':'pen','setcolor':'pen','pensize':'pen','color':'pen','setshade':'pen','setgray':'pen','gray':'pen','fillscreen':'pen','pendown':'pen','beginfill':'fill','fill':'fill','setfont':'fill','hollowline':'fill','endfill':'fill','plus':'number','minus':'number','multiply':'number','divide':'number','shade':'pen','mod':'number','int':'number','sqrt':'number','identity':'number','power':'number','abs':'number','and':'boolean','or':'boolean','not':'boolean','greater':'boolean','less':'boolean','equal':'boolean','random':'random','oneOf':'random','repeat':'repeat','forever':'repeat','if':'ifthen','ifthenelse':'ifthen','while':'ifthen','until':'ifthen','switch':'ifthen','case':'ifthen','default':'ifthen','break':'ifthen','waitfor':'ifthen','action':'action','do':'action','nameddo':'action','listen':'action','dispatch':'action','calc':'action','doArg':'action','calcArg':'action','dispatch':'action','namedcalc':'action','nameddoArg':'action','namedcalcArg':'action','arg':'action','namedarg':'action','return':'action','storein':'box','namedbox':'box','increment':'box','incrementOne':'box','luminance':'sensor','mousex':'sensor','mousey':'sensor','drum':'ignore','start':'ignore','mousebutton':'sensor','keyboard':'sensor','readpixel':'sensor','see':'sensor','time':'sensor','sound':'sensor','volume':'sensor','resistance':'sensor','voltage':'sensor','kbinput':'sensor','video':'media','wait':'media','camera':'media','journal':'media','audio':'media','show':'media','setscale':'media','mediawait':'media','mediapause':'media','mediastop':'media','mediaplay':'media','speak':'media','sinewave':'media','description':'media','leftpos':'media','rightpos':'media','toppos':'media','bottompos':'media','width':'media','height':'media','savepix':'ignore','savesvg':'ignore','saveabc':'ignore','savelilypond':'ignore','nobackground':'ignore','push':'box','pop':'box','printheap':'box','clearheap':'box','isheapempty':'box','chr':'number','print':'ignore','int':'number','myfunction':'python','userdefined':'python','box':'ignore','showHeap':'box','emptyHeap':'box','loadblock':'python','loadpalette':'python','hidden':'ignore','hiddennoflow':'ignore','text':'ignore','number':'ignore','hspace':'ignore','vspace':'ignore','setturtlename2':'mice','setturtlename':'mice','turtlename':'ignore','turtlesync':'mice','turtlenote2':'mice','turtlenote':'mice','turtlepitch':'mice','turtleelapsednotes':'mice','xturtle':'mice','yturtle':'mice','turtleheading':'mice','turtlecolor':'mice','startturtle':'mice','stopturtle':'mice',};const TAPAL={'beat':'notesp','note':'notesp','rhythm':'notesp','rhythmfactor':'notesp','notefactor':'notesp','pitch':'pitchp','pitchchord':'pitchp','transpose':'pitchp','transposefactor':'pitchp','tone':'tonep','forward':'turtlep','arc':'turtlep','coord':'turtlep','setxy':'turtlep','pen':'penp','fill':'penp','random':'numberp','boolean':'numberp','repeat':'flowp','ifthen':'flowp','action':'boxp','box':'boxp','sensor':'sensorp','media':'mediap','mice':'micep','number':'numberp','python':'numberp','ignore':'numberp'};const TASCORE={'note':1,'notefactor':1,'beat':10,'rhythm':5,'rhythmfactor':5,'pitchchord':3,'pitch':1,'transpose':5,'transposefactor':5,'tone':5,'forward':3,'arc':3,'setxy':2.5,'coord':4,'turtlep':5,'pen':2.5,'fill':2.5,'penp':5,'number':.5,'boolean':2.5,'random':2.5,'repeat':2.5,'ifthen':5,'flowp':2.5,'box':2.5,'action':2.5,'boxp':0,'media':5,'mediap':0,'python':5,'mice':7.5,'micep':2.5,'ignore':0,'sensor':5,'sensorp':0};const PALS=['notesp','pitchp','tonep','turtlep','penp','numberp','flowp','boxp','sensorp','mediap','micep'];const PALLABELS=[_('rhythm'),_('pitch'),_('tone'),_('mouse'),_('pen'),_('number'),_('flow'),_('action'),_('sensors'),_('media'),_('mice')];function analyzeProject(blocks){var blockList=[];for(var blk=0;blk<blocks.blockList.length;blk++){if(blocks.blockList[blk].trash){continue;}switch(blocks.blockList[blk].name){case'rhythmicdot':case'tie':case'drift':case'osctime':case'sharp':case'flat':case'fill':case'hollowline':case'start':if(blocks.blockList[blk].connections[1]==null){continue;}break;case'note':case'multiplybeatfactor':case'duplicatenotes':case'skipnotes':case'setbpm':case'settransposition':case'staccato':case'slur':case'swing':case'crescendo':case'setnotevolume2':case'vibrato':case'tremolo':case'dis':case'chorus':case'phaser':case'action':if(blocks.blockList[blk].connections[2]==null){continue;}break;case'tuplet2':if(blocks.blockList[blk].connections[3]==null){continue;}break;case'invert':if(blocks.blockList[blk].connections[4]==null){continue;}break;default:if(blocks.blockList[blk].connections[0]==null&&last(blocks.blockList[blk].connections)==null){continue;}break;}blockList.push(blocks.blockList[blk].name);}scores=[];for(var i=0;i<PALS.length;i++){scores.push(0);}cats=[];pals=[];for(var b=0;b<blockList.length;b++){if(blockList[b]in TACAT){if(!(TACAT[blockList[b]]in cats)){cats.push(TACAT[blockList[b]]);}}else{console.log(blockList[b]+' not in catalog');}}for(var c=0;c<cats.length;c++){if(cats[c]in TAPAL){if(!(TAPAL[cats[c]]in pals)){pals.push(TAPAL[cats[c]]);}}}for(var c=0;c<cats.length;c++){if(cats[c]in TASCORE){scores[PALS.indexOf(TAPAL[cats[c]])]+=TASCORE[cats[c]];}}for(var p=0;p<pals.length;p++){if(pals[p]in TASCORE){scores[PALS.indexOf(pals[p])]+=TASCORE[pals[p]];}}return scores;};function scoreToChartData(scores){var normalizedScores=[];var maxScore=0;for(var i=0;i<scores.length;i++){if(scores[i]>maxScore){maxScore=scores[i];}}if(maxScore>0){var scale=100/maxScore;}else{var scale=1;}if(scale>1){scale=1;}for(var i=0;i<scores.length;i++){normalizedScores.push(scores[i]*scale);}var data={labels:PALLABELS,datasets:[{label:'',fillColor:'rgba(220,220,220,0.4)',strokeColor:'rgba(220,220,220,1)',pointColor:'rgba(220,220,220,1)',pointStrokeColor:'#fff',pointHighlightFill:'#fff',pointHighlightStroke:'rgba(220,220,220,1)',data:normalizedScores,},]};return data;};function getChartOptions(callback){return{onAnimationComplete:callback,scaleShowLine:true,angleShowLineOut:true,scaleShowLabels:false,scaleBeginAtZero:true,angleLineColor:'rgba(0,0,0,.2)',angleLineWidth:10,pointLabelFontFamily:'Arial',pointLabelFontStyle:'normal',pointLabelFontSize:30,pointLabelFontColor:'#666',pointDot:true,pointDotRadius:18,pointDotStrokeWidth:6,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:12,datasetFill:true,legendTemplate:"<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"}};
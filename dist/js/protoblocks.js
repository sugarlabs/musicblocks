"use strict";function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(s){var i=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(s);return _possibleConstructorReturn(this,i?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,e,s){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0===s)return("string"===e?String:Number)(t);var i=s.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var ProtoBlock=function(){function e(t){_classCallCheck(this,e),this.name=t,this.palette=null,this.style=null,this.generator=null,this.expandable=!1,this.parameter=!1,this.args=0,this.defaults=[],this.size=1,this.dockTypes=[],this.staticLabels=[],this.fontsize=null,this.extraWidth=0,this.scale=DEFAULTBLOCKSCALE,this.image=null,this.hidden=!1,this.disabled=!1,this.deprecated=!1,this.textWidth=0,this.labelOffset=0,this.beginnerModeBlock=!1}return _createClass(e,[{key:"adjustWidthToLabel",value:function(){var t,e,s;0!==this.staticLabels.length&&(t=new createjs.Container,e=new createjs.Text(this.staticLabels[0],this.fontSize+"px Sans","#000000"),t.addChild(e),s=t.getBounds(),this.textWidth=s.width,this.extraWidth+=Math.max(s.width-30,0))}},{key:"zeroArgBlock",value:function(){this.args=0,this.dockTypes.push("out"),this.dockTypes.push("in"),this.generator=this.zeroArgBlockGenerator}},{key:"zeroArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setTab(!0),t.setSlot(!0),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(10+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"hiddenBlockFlow",value:function(){this.args=0,this.size=0,this.dockTypes.push("out"),this.dockTypes.push("in"),this.generator=this.hiddenBlockFlowGenerator}},{key:"hiddenBlockNoFlow",value:function(){this.args=0,this.size=0,this.dockTypes.push("out"),this.dockTypes.push("unavailable"),this.generator=this.hiddenBlockFlowGenerator}},{key:"hiddenBlockFlowGenerator",value:function(){var t=new SVG;t.setScale(this.scale),t.setSlot(!0),t.setTab(!0),this.fontsize&&t.setFontSize(this.fontsize);t.basicBlock();return t.docks[1][1]=t.docks[0][1],['<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><text style="font-size:10px;fill:#000000;font-family:sans-serif;text-anchor:end"><tspan x="46.333333333333336" y="13.5">block_label</tspan></text></svg>',t.docks,0,0,0]}},{key:"basicBlockNoFlow",value:function(){this.args=0,this.dockTypes.push("out"),this.dockTypes.push("unavailable"),this.generator=this.basicBlockNoFlowGenerator}},{key:"basicBlockNoFlowGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setSlot(!0),t.setTail(!0),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(30+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"basicBlockCollapsed",value:function(){this.args=0,this.dockTypes.push("unavailable"),this.dockTypes.push("unavailable"),this.generator=this.basicBlockCollapsedGenerator}},{key:"basicBlockCollapsedGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setCap(!0),t.setTail(!0),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(30+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"oneArgBlock",value:function(){this.args=1,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.generator=this.oneArgBlockGenerator}},{key:"oneArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setTab(!0),t.setInnies([!0]),t.setSlot(!0),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(30+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"oneBooleanArgBlock",value:function(){this.args=1,this.size=1,this.dockTypes.push("out"),this.dockTypes.push("booleanin"),this.dockTypes.push("in"),this.generator=this.oneBooleanArgBlockGenerator}},{key:"oneBooleanArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setTab(!0),t.setSlot(!0),t.setBoolean(!0),t.setClampCount(0),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(30+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"twoArgBlock",value:function(){this.expandable=!0,this.style="twoarg",this.size=2,this.args=2,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.generator=this.twoArgBlockGenerator}},{key:"twoArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setInnies([!0,!0]),e.setSlot(!0),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"threeArgBlock",value:function(){this.expandable=!0,this.style="twoarg",this.size=3,this.args=3,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.generator=this.threeArgBlockGenerator}},{key:"threeArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setInnies([!0,!0,!0]),e.setSlot(!0),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"fourArgBlock",value:function(){this.expandable=!0,this.style="twoarg",this.size=4,this.args=4,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.generator=this.fourArgBlockGenerator}},{key:"fourArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setInnies([!0,!0,!0,!0]),e.setSlot(!0),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"oneArgMathBlock",value:function(){this.style="arg",this.size=1,this.args=1,this.parameter=!0,this.dockTypes.push("numberout"),this.dockTypes.push("numberin"),this.generator=this.oneArgMathBlockGenerator}},{key:"oneArgMathBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setSlot(!1),t.setInnies([!0]),t.setOutie(!0),t.setTab(!1),this.fontsize&&t.setFontSize(this.fontsize),t.setExpand(30+this.extraWidth,0,0,0),[t.basicBlock(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"twoArgMathBlock",value:function(){this.expandable=!0,this.style="arg",this.size=2,this.args=2,this.parameter=!0,this.dockTypes.push("numberout"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.generator=this.twoArgMathBlockGenerator}},{key:"twoArgMathBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setSlot(!1),e.setInnies([!0,!0]),e.setOutie(!0),e.setTab(!1),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"threeArgMathBlock",value:function(){this.expandable=!0,this.style="arg",this.size=3,this.args=3,this.parameter=!0,this.dockTypes.push("numberout"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.generator=this.threeArgMathBlockGenerator}},{key:"threeArgMathBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setSlot(!1),e.setInnies([!0,!0,!0]),e.setOutie(!0),e.setTab(!1),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"fourArgMathBlock",value:function(){this.expandable=!0,this.style="arg",this.size=4,this.args=4,this.parameter=!0,this.dockTypes.push("numberout"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.generator=this.fourArgMathBlockGenerator}},{key:"fourArgMathBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setSlot(!1),e.setInnies([!0,!0,!0,!0]),e.setOutie(!0),e.setTab(!1),t?e.setExpand(30+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.basicBlock(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"valueBlock",value:function(){this.style="value",this.size=1,this.args=0,this.dockTypes.push("numberout"),this.generator=this.valueBlockGenerator}},{key:"valueBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(60+this.extraWidth,0,0,0),t.setOutie(!0),this.fontsize&&t.setFontSize(this.fontsize),[t.basicBox(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"mediaBlock",value:function(){this.style="value",this.size=2,this.args=0,this.dockTypes.push("mediaout"),this.generator=this.mediaBlockGenerator}},{key:"mediaBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(60+this.extraWidth,23,0,0),t.setOutie(!0),this.fontsize&&t.setFontSize(this.fontsize),[t.basicBox(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"stackClampZeroArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=3,this.args=1,this.dockTypes.push("unavailable"),this.dockTypes.push("in"),this.dockTypes.push("unavailable"),this.generator=this.stackClampZeroArgBlockGenerator}},{key:"stackClampZeroArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setCap(!0),e.setTail(!0),e.setExpand(20+this.extraWidth,0,0,0),e.setLabelOffset(this.labelOffset),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[1][1]]}},{key:"flowClampBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=2,this.args=1,this.dockTypes.push("out"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampBlockGenerator}},{key:"flowClampBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[1][1]]}},{key:"flowClampOneArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=2,this.args=2,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampOneArgBlockGenerator}},{key:"flowClampOneArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setInnies([!0]),e.setLabelOffset(this.labelOffset),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[2][1]]}},{key:"flowClampTwoArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=3,this.args=3,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampTwoArgBlockGenerator}},{key:"flowClampTwoArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setInnies([!0,!0]),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[3][1]]}},{key:"flowClampThreeArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=4,this.args=4,this.dockTypes.push("out"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.dockTypes.push("textin"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampThreeArgBlockGenerator}},{key:"flowClampThreeArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setInnies([!0,!0,!0]),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[4][1]]}},{key:"argClampOneArgBlock",value:function(){this.style="argclamp",this.expandable=!0,this.size=3,this.args=2,this.dockTypes.push("out"),this.dockTypes.push("textin"),this.dockTypes.push("anyin"),this.dockTypes.push("in"),this.generator=this.argClampOneArgBlockGenerator}},{key:"argClampOneArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setInnies([!0]),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,[1]),this.fontsize&&e.setFontSize(this.fontsize),[e.argClamp(),e.docks,e.getWidth(),e.getHeight(),(e.docks[1][1]+e.docks[2][1])/2]}},{key:"argClampOneArgMathBlock",value:function(){this.style="argclamparg",this.expandable=!0,this.size=3,this.args=2,this.dockTypes.push("anyout"),this.dockTypes.push("textin"),this.dockTypes.push("anyin"),this.generator=this.argClampOneArgMathBlockGenerator}},{key:"argClampOneArgMathBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setInnies([!0]),e.setOutie(!0),e.setTab(!1),e.setSlot(!1),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,[1]),this.fontsize&&e.setFontSize(this.fontsize),[e.argClamp(),e.docks,e.getWidth(),e.getHeight(),(e.docks[1][1]+e.docks[2][1])/2]}},{key:"argClampBlock",value:function(){this.style="argclamp",this.expandable=!0,this.size=3,this.args=1,this.dockTypes.push("out"),this.dockTypes.push("anyin"),this.dockTypes.push("in"),this.generator=this.argClampBlockGenerator}},{key:"argClampBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,[1]),this.fontsize&&e.setFontSize(this.fontsize),[e.argClamp(),e.docks,e.getWidth(),e.getHeight(),2*e.docks[1][1]/3]}},{key:"argClampMathBlock",value:function(){this.style="argclamparg",this.expandable=!0,this.size=3,this.args=1,this.dockTypes.push("anyout"),this.dockTypes.push("anyin"),this.generator=this.argClampMathBlockGenerator}},{key:"argClampMathBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setOutie(!0),e.setTab(!1),e.setSlot(!1),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,[1]),this.fontsize&&e.setFontSize(this.fontsize),[e.argClamp(),e.docks,e.getWidth(),e.getHeight(),2*e.docks[1][1]/3]}},{key:"flowClampBooleanArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=3,this.args=2,this.dockTypes.push("out"),this.dockTypes.push("booleanin"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampBooleanArgBlockGenerator}},{key:"flowClampBooleanArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setBoolean(!0),e.setSlot(!0),e.setExpand(this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[2][1]]}},{key:"doubleFlowClampBooleanArgBlock",value:function(){this.style="doubleclamp",this.expandable=!0,this.size=4,this.args=3,this.dockTypes.push("out"),this.dockTypes.push("booleanin"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.doubleFlowClampBooleanArgBlockGenerator}},{key:"doubleFlowClampBooleanArgBlockGenerator",value:function(t,e){var s=new SVG;return s.setScale(this.scale),s.setTab(!0),s.setSlot(!0),s.setBoolean(!0),s.setClampCount(2),e?s.setClampSlots(0,e):s.setClampSlots(0,1),t?s.setClampSlots(1,t):s.setClampSlots(1,1),s.setExpand(this.extraWidth,0,0,0),this.fontsize&&s.setFontSize(this.fontsize),[s.basicClamp(),s.docks,s.getWidth(),s.getHeight(),s.docks[2][1]]}},{key:"flowClampZeroArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=2,this.args=1,this.dockTypes.push("out"),this.dockTypes.push("in"),this.dockTypes.push("in"),this.generator=this.flowClampZeroArgBlockGenerator}},{key:"flowClampZeroArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setTab(!0),e.setSlot(!0),e.setExpand(10+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[1][1]]}},{key:"argFlowClampBlock",value:function(){this.style="argflowclamp",this.expandable=!0,this.size=3,this.args=1,this.dockTypes.push("anyout"),this.dockTypes.push("in"),this.generator=this.argFlowClampGenerator}},{key:"argFlowClampGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setSlot(!1),e.setOutie(!0),e.setExpand(20+this.extraWidth,0,0,0),t?e.setClampSlots(0,t):e.setClampSlots(0,[1]),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[1][1]]}},{key:"stackClampOneArgBlock",value:function(){this.style="clamp",this.expandable=!0,this.size=3,this.args=2,this.dockTypes.push("unavailable"),this.dockTypes.push("anyin"),this.dockTypes.push("in"),this.dockTypes.push("unavailable"),this.generator=this.stackClampOneArgBlockGenerator}},{key:"stackClampOneArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),e.setCap(!0),e.setTail(!0),e.setInnies([!0]),e.setExpand(10+this.extraWidth,0,0,0),e.setLabelOffset(this.labelOffset),t?e.setClampSlots(0,t):e.setClampSlots(0,1),this.fontsize&&e.setFontSize(this.fontsize),[e.basicClamp(),e.docks,e.getWidth(),e.getHeight(),e.docks[2][1]]}},{key:"booleanZeroArgBlock",value:function(){this.style="arg",this.size=1,this.args=0,this.dockTypes.push("booleanout"),this.generator=this.booleanZeroArgBlockGenerator}},{key:"booleanZeroArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(60+this.extraWidth,0,0,4),this.fontsize&&t.setFontSize(this.fontsize),[t.booleanNot(!0),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"booleanOneArgBlock",value:function(){this.style="arg",this.size=2,this.args=1,this.parameter=!0,this.dockTypes.push("booleanout"),this.dockTypes.push("textin"),this.generator=this.booleanOneArgBlockGenerator}},{key:"booleanOneArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(20+this.extraWidth,0,0,0),this.fontsize&&t.setFontSize(this.fontsize),t.setInnies([!0]),[t.booleanNot(!0),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"booleanOneBooleanArgBlock",value:function(){this.style="arg",this.size=2,this.args=1,this.parameter=!0,this.dockTypes.push("booleanout"),this.dockTypes.push("booleanin"),this.generator=this.booleanOneBooleanArgBlockGenerator}},{key:"booleanOneBooleanArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(20+this.extraWidth,0,0,0),this.fontsize&&t.setFontSize(this.fontsize),[t.booleanNot(!1),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"booleanTwoBooleanArgBlock",value:function(){this.style="arg",this.size=3,this.args=2,this.parameter=!0,this.dockTypes.push("booleanout"),this.dockTypes.push("booleanin"),this.dockTypes.push("booleanin"),this.generator=this.booleanTwoBooleanArgBlockGenerator}},{key:"booleanTwoBooleanArgBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(20+this.extraWidth,0,0,0),this.fontsize&&t.setFontSize(this.fontsize),[t.booleanAndOr(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"booleanTwoArgBlock",value:function(){this.style="arg",this.size=2,this.args=2,this.parameter=!0,this.expandable=!0,this.dockTypes.push("booleanout"),this.dockTypes.push("numberin"),this.dockTypes.push("numberin"),this.generator=this.booleanTwoArgBlockGenerator}},{key:"booleanTwoArgBlockGenerator",value:function(t){var e=new SVG;return e.setScale(this.scale),t?e.setExpand(10+this.extraWidth,(t-1)*STANDARDBLOCKHEIGHT/2,0,0):e.setExpand(10+this.extraWidth,0,0,0),this.fontsize&&e.setFontSize(this.fontsize),[e.booleanCompare(),e.docks,e.getWidth(),e.getHeight(),e.getHeight()]}},{key:"parameterBlock",value:function(){this.style="arg",this.parameter=!0,this.size=1,this.args=0,this.dockTypes.push("numberout"),this.generator=this.parameterBlockGenerator}},{key:"parameterBlockGenerator",value:function(){var t=new SVG;return t.setScale(this.scale),t.setExpand(70+this.extraWidth,0,0,0),t.setOutie(!0),this.fontsize&&t.setFontSize(this.fontsize),[t.basicBox(),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}}]),e}(),isObject=function(t){return t&&"object"===_typeof(t)&&!Array.isArray(t)},mergeDeep=function t(e){for(var s=arguments.length,i=new Array(1<s?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];if(!i.length)return e;var a=i.shift();if(isObject(e)&&isObject(a))for(var n in a)isObject(a[n])?(e[n]||Object.assign(e,_defineProperty({},n,{})),t(e[n],a[n])):Object.assign(e,_defineProperty({},n,a[n]));return t.apply(void 0,[e].concat(i))},BaseBlock=function(){_inherits(i,ProtoBlock);var s=_createSuper(i);function i(t){var e;return _classCallCheck(this,i),(e=s.call(this,t)).macroFunc=null,e._style={},e.beginnerModeBlock=!1,e.deprecated=!1,e.extraSearchTerms=[],e.helpString=[],e.piemenuValuesC1=[],e.piemenuValuesC2=[],e.piemenuValuesC3=[],e.piemenuLabels=[],e.lang=localStorage.languagePreference||navigator.language,e}return _createClass(i,[{key:"setPalette",value:function(t,e){this.palette=e.palettes.dict[t]}},{key:"setHelpString",value:function(t){this.helpString=t}},{key:"formBlock",value:function(t){var e,s,i,o,a,n,l=this;if(mergeDeep(this._style,t),(e=this._style).args||(e.args=0),(s=this._style).argTypes||(s.argTypes=[]),(i=this._style).argLabels||(i.argLabels=[]),(o=this._style).defaults||(o.defaults=[]),(a=this._style).flows||(a.flows={}),(n=this._style.flows).labels||(n.labels=[]),1<this._style.args&&(this.expandable=!0),0<this._style.flows.labels.length?("arg"===this._style.flows.type?this.style="argclamp":"value"===this._style.flows.type?this.style="value":2==this._style.flows.labels.length?this.style="doubleclamp":this.style="clamp",this.expandable=!0):"value"===this._style.flows.type?this.style="value":this._style.flows.left?(this.style="arg",this.parameter=!0):2===this._style.args&&(this.style="twoarg"),"value"===this._style.flows.type&&2===this._style.args&&(this.expandable=!0),this.args=this._style.flows.labels.length+this._style.args,0!==this.size&&(this.size=1+this._style.flows.labels.length),"booleanin"===this._style.argTypes[0]||"booleanin"===this._style.argTypes[1]?this.size++:this.size+=Math.max(0,this._style.args-1),"arg"===this._style.flows.type&&this.size++,this._style.image&&(this.size++,this.image=this._style.image),this.staticLabels=[this._style.name||""],this.dockTypes=[],this.defaults=[],this._style.argLabels.forEach(function(t){return l.staticLabels.push(t)}),this._style.flows.labels.forEach(function(t){return l.staticLabels.push(t)}),this._style.flows.left&&this.dockTypes.push(this._style.outType||"numberout"),this._style.flows.top&&this.dockTypes.push("cap"===this._style.flows.top?"unavailable":"out"),"number"==typeof this._style.args)for(var r=0;r<this._style.args;r++)this.dockTypes.push(this._style.argTypes[r]||"numberin"),r<this._style.defaults.length&&this.defaults.push(this._style.defaults[r]);if("arg"===this._style.flows.type)for(var h=0;h<this._style.flows.labels.length;h++)this.dockTypes.push(this._style.flows.types[h]||"numberin");for(var c=0;c<this._style.flows.labels.length;c++)this.dockTypes.push("in");this._style.flows.bottom&&this.dockTypes.push("tail"===this._style.flows.bottom?"unavailable":"in"),this.generator=function(){var t=new SVG;t.setScale(this.scale),"cap"===this._style.flows.top?t.setCap(!0):t.setSlot(this._style.flows.top),"tail"===this._style.flows.bottom?t.setTail(!0):this._style.flows.bottom&&t.setTab(!0),this._style.flows.left&&t.setOutie(!0);var e="value"===this._style.flows.type?60:20;this._style.flows.type||(e+=10),"booleanout"===this._style.outType&&2===this._style.args?e-=30:"booleanin"===this._style.argTypes[0]&&(e-=5),0!==this.size&&t.setExpand(e+this.extraWidth,this.image?23:0,0,"booleanout"!==this._style.outType||this._style.args?0:4);for(var s=arguments.length;s<this._style.flows.labels.length;s++)t.setClampSlots(s,1);t.setClampCount(this._style.flows.labels.length);for(var i,o,a=0;a<arguments.length;a++)null==this._style.flows.type?t.setExpand(30+this.extraWidth,(arguments[arguments.length-a-1]-1)*STANDARDBLOCKHEIGHT/2,0,0):"value"==this._style.flows.type?t.setExpand(60+this.extraWidth,(arguments[arguments.length-a-1]-1)*STANDARDBLOCKHEIGHT/2,0,0):t.setClampSlots(a,arguments[arguments.length-a-1]||1);return"booleanin"===this._style.argTypes[0]?t.setBoolean(!0):"number"==typeof this._style.args&&t.setInnies(Array(this._style.args).fill(!0)),this._style.canCollapse&&t.setLabelOffset(15),this.fontsize&&t.setFontSize(this.fontsize),i="arg"===this._style.flows.type?t.argClamp():"flow"===this._style.flows.type?t.basicClamp():"booleanout"===this._style.outType?1!==this._style.args&&this._style.args?"booleanin"===this._style.argTypes[0]?t.booleanAndOr():t.booleanCompare():t.booleanNot(!this._style.args):"value"===this._style.flows.type?t.basicBox():t.basicBlock(),0===this.size&&(i='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><text style="font-size:10px;fill:#000000;font-family:sans-serif;text-anchor:end"><tspan x="46.333333333333336" y="13.5">block_label</tspan></text></svg>',t.docks[1][1]=t.docks[0][1]),this.isLeftClamp="clamp"===this.style&&1==this._style.flows.left&&0===this._style.args&&"flow"==this._style.flows.type,o=this._style.flows.top||this._style.flows.bottom?t.docks[t.docks.length-this._style.flows.labels.length-1][1]:this.isLeftClamp?t.docks[t.docks.length-this._style.flows.labels.length][1]:t.getHeight(),0===this.size?[i,t.docks,0,0,0]:("bool"===this._style.flows.left&&(i=t.booleanNot(!0)),[i,t.docks,t.getWidth(),t.getHeight(),o])}}},{key:"makeMacro",value:function(t){this.macroFunc=t}},{key:"updateDockValue",value:function(t,e){this.dockTypes[t]=e}},{key:"changeName",value:function(t){this.name=t}},{key:"beginnerBlock",value:function(t){this.beginnerModeBlock=t}},{key:"appleNoteBlock",value:function(){this.style="basic",this.size=1,this.args=0,this.dockTypes.push("out"),this.dockTypes.push("in"),this.generator=this.appleNoteBlockGenerator}},{key:"appleNoteBlockGenerator",value:function(){var t=new SVG;t.setScale(this.scale),t.setTab(!0),t.setSlot(!0),t.setExpand(30+this.extraWidth,0,0,0),this.fontsize&&t.setFontSize(this.fontsize);var e,s=t.basicBlock();switch(this.name){case"wholeNote":e='<g transform="translate(-312.0000,-493.37592) scale(1.1)">\n                    <g transform="translate(7.9606,5.6125499)" style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1">\n                        <path d="m 369.80263,457.99537 q 1.104,0 1.872,0.432 0.768,0.416 0.768,1.2 0,0.752 -0.752,1.168 -0.752,0.4 -1.808,0.4 -1.104,0 -1.856,-0.416 -0.752,-0.416 -0.752,-1.232 0,-0.576 0.464,-0.944 0.48,-0.368 1.008,-0.48 0.528,-0.128 1.056,-0.128 z m -0.864,1.136 q 0,0.672 0.304,1.184 0.304,0.512 0.784,0.512 0.736,0 0.736,-0.8 0,-0.64 -0.304,-1.136 -0.288,-0.512 -0.8,-0.512 -0.72,0 -0.72,0.752 z" />\n                    </g>\n                </g>';break;case"halfNote":e='<g transform="translate(-290.23523,-445.37592)">\n                    <g style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1">\n                        <path d="m 375.23523,465.70392 q 0,-0.832 0.816,-1.472 0.816,-0.656 1.728,-0.656 0.528,0 0.944,0.272 l 0,-9.472 0.352,0 0,10.352 q 0,0.896 -0.784,1.488 -0.784,0.592 -1.728,0.592 -0.528,0 -0.928,-0.304 -0.4,-0.32 -0.4,-0.8 z m 0.736,0.48 q 0.848,0 1.712,-0.72 0.88,-0.72 0.88,-1.072 0,-0.224 -0.192,-0.224 -0.592,0 -1.632,0.688 -1.024,0.672 -1.024,1.12 0,0.208 0.256,0.208 z" />\n                    </g>\n                </g>';break;case"sixteenthNote":e='<g transform="translate(-92.21292,-422.51877)">\n                    <g style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1">\n                        <path d="m 182.21292,442.84677 q 0,-0.832 0.816,-1.472 0.816,-0.656 1.728,-0.656 0.528,0 0.944,0.272 l 0,-9.472 0.336,0 q 0.064,0.56 0.4,1.088 0.352,0.512 0.8,0.944 0.448,0.416 0.88,0.864 0.448,0.432 0.752,1.024 0.304,0.576 0.304,1.232 0,0.544 -0.256,1.104 0.304,0.448 0.304,1.184 0,1.232 -0.608,2.24 l -0.384,0 q 0.56,-1.12 0.56,-2.032 0,-0.512 -0.256,-0.96 -0.24,-0.448 -0.752,-0.816 -0.496,-0.368 -0.832,-0.56 -0.32,-0.192 -0.896,-0.48 l 0,5.52 q 0,0.896 -0.784,1.488 -0.784,0.592 -1.728,0.592 -0.528,0 -0.928,-0.304 -0.4,-0.32 -0.4,-0.8 z m 6.464,-5.904 q 0,-1.648 -2.624,-3.072 0,0.464 0.192,0.88 0.192,0.416 0.512,0.752 0.32,0.32 0.656,0.592 0.336,0.272 0.688,0.608 0.352,0.32 0.544,0.608 0.032,-0.256 0.032,-0.368 z" />\n                    </g>\n                </g>';break;case"thirtysecondNote":e='<g transform="translate(-540.78433,-233.88335)">\n                    <g style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1">\n                        <path d="m 630.78433,254.27535 q 0,-0.832 0.816,-1.472 0.816,-0.656 1.728,-0.656 0.528,0 0.944,0.272 l 0,-11.536 0.352,0 q 0.048,0.56 0.384,1.072 0.336,0.496 0.768,0.912 0.432,0.4 0.864,0.848 0.432,0.448 0.72,1.104 0.304,0.656 0.304,1.456 0,0.48 -0.16,1.056 0.224,0.416 0.224,0.912 0,0.512 -0.24,0.976 0.304,0.448 0.304,1.168 0,1.232 -0.608,2.24 l -0.384,0 q 0.56,-1.12 0.56,-2.032 0,-0.512 -0.256,-0.96 -0.24,-0.448 -0.752,-0.816 -0.496,-0.368 -0.832,-0.56 -0.32,-0.192 -0.896,-0.48 l 0,5.52 q 0,0.896 -0.784,1.488 -0.784,0.592 -1.728,0.592 -0.528,0 -0.928,-0.304 -0.4,-0.32 -0.4,-0.8 z m 6.448,-7.872 q 0,-0.496 -0.208,-0.928 -0.192,-0.432 -0.64,-0.832 -0.432,-0.416 -0.784,-0.672 -0.352,-0.256 -0.976,-0.656 0.032,0.448 0.352,0.896 0.32,0.432 0.704,0.752 0.4,0.32 0.848,0.8 0.464,0.464 0.704,0.912 l 0,-0.272 z m 0,2.096 q 0,-0.4 -0.16,-0.768 -0.144,-0.368 -0.32,-0.608 -0.16,-0.256 -0.592,-0.608 -0.416,-0.352 -0.672,-0.528 -0.256,-0.176 -0.848,-0.576 0.064,0.48 0.4,0.976 0.336,0.48 0.72,0.816 0.4,0.336 0.832,0.784 0.448,0.432 0.64,0.784 l 0,-0.272 z" />\n                    </g>\n                </g>';break;case"sixtyfourthNote":e='<g transform="translate(-255.3223,-318.39492)">\n                    <g transform="translate(3.1093785,1.6864426)" style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1">\n                        <path d="m 342.21292,337.13248 q 0,-0.832 0.816,-1.472 0.816,-0.656 1.728,-0.656 0.528,0 0.944,0.272 l 0,-11.568 0.336,0 q 0.064,0.64 0.384,1.104 0.336,0.464 0.752,0.768 0.416,0.304 0.832,0.656 0.416,0.336 0.688,0.928 0.288,0.592 0.288,1.44 0,0.24 -0.144,0.768 0.256,0.608 0.256,1.376 0,0.32 -0.16,0.896 0.224,0.416 0.224,0.912 0,0.496 -0.24,0.96 0.304,0.448 0.304,1.024 0,0.384 -0.08,0.688 -0.08,0.304 -0.16,0.448 -0.08,0.144 -0.368,0.608 l -0.384,0 q 0.08,-0.16 0.192,-0.368 0.112,-0.224 0.16,-0.32 0.064,-0.096 0.112,-0.24 0.064,-0.144 0.08,-0.288 0.016,-0.144 0.016,-0.32 0,-0.272 -0.096,-0.512 -0.08,-0.256 -0.176,-0.432 -0.096,-0.192 -0.32,-0.4 -0.224,-0.208 -0.368,-0.32 -0.144,-0.128 -0.464,-0.304 -0.304,-0.192 -0.432,-0.256 -0.128,-0.064 -0.48,-0.224 -0.336,-0.176 -0.4,-0.208 l 0,4.064 q 0,0.896 -0.784,1.488 -0.784,0.592 -1.728,0.592 -0.528,0 -0.928,-0.304 -0.4,-0.32 -0.4,-0.8 z m 6.352,-8.384 q 0,-0.352 -0.144,-0.688 -0.128,-0.352 -0.288,-0.576 -0.16,-0.224 -0.48,-0.496 -0.32,-0.272 -0.512,-0.4 -0.192,-0.144 -0.592,-0.384 -0.384,-0.24 -0.496,-0.32 0.032,0.432 0.352,0.832 0.32,0.384 0.704,0.656 0.4,0.272 0.816,0.72 0.432,0.432 0.624,0.912 0.016,-0.176 0.016,-0.256 z m 0.016,2.128 q 0,-0.208 -0.048,-0.4 -0.032,-0.192 -0.08,-0.336 -0.048,-0.16 -0.176,-0.336 -0.128,-0.176 -0.208,-0.288 -0.08,-0.112 -0.272,-0.272 -0.192,-0.176 -0.288,-0.256 -0.096,-0.08 -0.352,-0.256 -0.24,-0.176 -0.336,-0.224 -0.096,-0.064 -0.384,-0.24 -0.288,-0.192 -0.384,-0.256 0.032,0.464 0.368,0.88 0.336,0.416 0.736,0.704 0.4,0.272 0.816,0.688 0.416,0.416 0.576,0.864 0.032,-0.192 0.032,-0.272 z m -0.016,1.936 q 0,-0.848 -0.624,-1.504 -0.608,-0.672 -1.872,-1.392 0.064,0.464 0.384,0.896 0.336,0.416 0.72,0.688 0.4,0.272 0.8,0.704 0.4,0.416 0.576,0.88 0.016,-0.064 0.016,-0.272 z" />\n                    </g>\n                </g>'}return[s.replace("</svg>","".concat(e,"</svg>")),t.docks,t.getWidth(),t.getHeight(),t.getHeight()]}},{key:"setup",value:function(t){t.blocks.protoBlockDict[this.name]=this,t.beginnerMode&&!this.beginnerModeBlock&&(this.hidden=!0),this._style.name&&this.adjustWidthToLabel(),this.palette?this.palette.add(this):console.warn("Block "+this.name+" was not added to a palette!")}}]),i}(),ValueBlock=function(){_inherits(o,BaseBlock);var i=_createSuper(o);function o(t,e){var s;return _classCallCheck(this,o),e=e||void 0,(s=i.call(this,t)).formBlock({name:e,flows:{left:!0,type:"value"}},!!e),s}return o}(),BooleanBlock=function(){_inherits(i,BaseBlock);var s=_createSuper(i);function i(t){var e;return _classCallCheck(this,i),(e=s.call(this,t)).formBlock({flows:{left:!0,type:"value"},outType:"booleanout"}),e}return i}(),BooleanSensorBlock=function(){_inherits(o,BaseBlock);var i=_createSuper(o);function o(t,e){var s;return _classCallCheck(this,o),e=e||void 0,(s=i.call(this,t)).formBlock({name:e,flows:{left:!0,type:"value"},outType:"booleanout"}),s}return o}(),FlowBlock=function(){_inherits(o,BaseBlock);var i=_createSuper(o);function o(t,e){var s;return _classCallCheck(this,o),e=e||void 0,(s=i.call(this,t)).formBlock({name:e,flows:{top:!0,bottom:!0}},!!e),s}return o}(),LeftBlock=function(){_inherits(o,BaseBlock);var i=_createSuper(o);function o(t,e){var s;return _classCallCheck(this,o),e=e||void 0,(s=i.call(this,t)).formBlock({name:e,flows:{left:!0,type:null}},!!e),s}return o}(),FlowClampBlock=function(){_inherits(i,FlowBlock);var s=_createSuper(i);function i(t){var e;return _classCallCheck(this,i),(e=s.call(this,t)).extraWidth=20,e.formBlock({flows:{type:"flow",labels:[""]}}),e}return i}(),StackClampBlock=function(){_inherits(i,BaseBlock);var s=_createSuper(i);function i(t){var e;return _classCallCheck(this,i),(e=s.call(this,t)).extraWidth=40,e.formBlock({flows:{top:"cap",bottom:"tail",type:"flow",labels:[""]}}),e}return i}();"undefined"!=typeof module&&module.exports&&(module.exports=ProtoBlock);
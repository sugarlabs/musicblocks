"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function setupPenBlocks(a){var e=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"purple",_("purple"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:90}],0,0,[0]]]}),e}return r}(),t=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"blue",_("blue"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:70}],0,0,[0]]]}),e}return r}(),r=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"green",_("green"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:40}],0,0,[0]]]}),e}return r}(),n=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"yellow",_("yellow"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:20}],0,0,[0]]]}),e}return r}(),l=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"orange",_("orange"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:10}],0,0,[0]]]}),e}return r}(),o=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"red",_("red"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setcolor",e,t,[null,1,null]],[1,["number",{value:0}],0,0,[0]]]}),e}return r}(),s=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"white",_("white"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setshade",e,t,[null,1,null]],[1,["number",{value:100}],0,0,[0]]]}),e}return r}(),i=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"black",_("black"))).setPalette("pen",a),e.setHelpString(),e.makeMacro(function(e,t){return[[0,"setshade",e,t,[null,1,null]],[1,["number",{value:0}],0,0,[0]]]}),e}return r}(),u=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"beginfill",_("begin fill"))).setPalette("pen",a),e.setHelpString(),e.hidden=!0,e}return _createClass(r,[{key:"flow",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doStartFill()}}]),r}(),c=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"endfill",_("end fill"))).setPalette("pen",a),e.setHelpString(),e.hidden=!0,e}return _createClass(r,[{key:"flow",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doEndFill()}}]),r}(),p=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"fillscreen",_("background"))).setPalette("pen",a),e.setHelpString(),e.formBlock({args:3}),e.hidden=!0,e}return _createClass(r,[{key:"flow",value:function(e,t,r){var n,l,o,s=a.turtles.getTurtle(a.turtles.companionTurtle(r));3===e.length&&(n=s.painter.color,l=s.painter.value,o=s.painter.chroma,s.painter.doSetHue(e[0]),s.painter.doSetValue(e[1]),s.painter.doSetChroma(e[2]),a.turtles.setBackgroundColor(a.turtles.companionTurtle(r)),s.painter.doSetHue(n),s.painter.doSetValue(l),s.painter.doSetChroma(o),t.svgOutput="")}}]),r}(),h=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"grey",_("grey"))).setPalette("pen",a),e.parameter=!0,e.setHelpString([_("The Grey block returns the current pen grey value."),"documentation",""]),e}return _createClass(r,[{key:"updateParameter",value:function(e,t){return toFixed2(a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.chroma)}},{key:"setter",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doSetChroma(t)}},{key:"arg",value:function(e,t,r){if(!e.inStatusMatrix||"print"!==a.blocks.blockList[a.blocks.blockList[r].connections[0]].name)return a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.chroma;e.statusFields.push([r,"grey"])}}]),r}(),f=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"shade",_("shade"))).setPalette("pen",a),e.parameter=!0,e.setHelpString([_("The Shade block returns the current pen shade value."),"documentation",""]),e}return _createClass(r,[{key:"updateParameter",value:function(e,t){return toFixed2(a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.value)}},{key:"setter",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doSetValue(t)}},{key:"arg",value:function(e,t,r){if(!e.inStatusMatrix||"print"!==a.blocks.blockList[a.blocks.blockList[r].connections[0]].name)return a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.value;e.statusFields.push([r,"shade"])}}]),r}(),k=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"color",_("color"))).setPalette("pen",a),e.beginnerBlock(!0),e.parameter=!0,e.setHelpString([_("The Color block returns the current pen color."),"documentation",""]),e}return _createClass(r,[{key:"updateParameter",value:function(e,t){return toFixed2(a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.color)}},{key:"setter",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doSetColor(t)}},{key:"arg",value:function(e,t,r){if(!e.inStatusMatrix||"print"!==a.blocks.blockList[a.blocks.blockList[r].connections[0]].name)return a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.color;e.statusFields.push([r,"color"])}}]),r}(),d=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"pensize",_("pen size"))).setPalette("pen",a),e.parameter=!0,e.setHelpString([_("The Pen size block returns the current pen size value."),"documentation",""]),e}return _createClass(r,[{key:"updateParameter",value:function(e,t){return toFixed2(a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.stroke)}},{key:"setter",value:function(e,t,r){a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doSetPensize(t)}},{key:"arg",value:function(e,t,r){if(!e.inStatusMatrix||"print"!==a.blocks.blockList[a.blocks.blockList[r].connections[0]].name)return a.turtles.getTurtle(a.turtles.companionTurtle(t)).painter.stroke;e.statusFields.push([r,"pensize"])}}]),r}(),g=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"setfont",_("set font"))).setPalette("pen",a),e.setHelpString([_("The Set font block sets the font used by the Show block."),"documentation",""]),e.formBlock({args:1,defaults:[DEFAULTFONT],argTypes:["textin"]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){null!==e[0]?"string"==typeof e[0]&&a.turtles.getTurtle(a.turtles.companionTurtle(r)).painter.doSetFont(e[0]):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),m=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"background",_("background"))).setPalette("pen",a),e.beginnerBlock(!0),e.setHelpString([_("The Background block sets the window background color."),"documentation",""]),e}return _createClass(r,[{key:"flow",value:function(e,t,r){a.turtles.setBackgroundColor(a.turtles.companionTurtle(r)),t.svgOutput=""}}]),r}(),v=function(){_inherits(r,FlowClampBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"hollowline")).setPalette("pen",a),e.setHelpString([_("The Hollow line block creates a line with a hollow center."),"documentation",""]),e.formBlock({name:_("hollow line")}),e.makeMacro(function(e,t){return[[0,"hollowline",e,t,[null,null,1]],[1,"hidden",0,0,[0,null]]]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){if(void 0!==e[0]){var l=a.turtles.ithTurtle(a.turtles.companionTurtle(r));0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doStartHollowLine();var o="_hollowline_"+r;t.setDispatchBlock(n,r,o);return t.setTurtleListener(r,o,function(){0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doEndHollowLine()}),[e[0],1]}}}]),r}(),b=function(){_inherits(r,FlowClampBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"fill")).setPalette("pen",a),e.beginnerBlock(!0),e.setHelpString([_("The Fill block fills in a shape with a color."),"documentation",null,"fillhelp"]),e.formBlock({name:_("fill")}),e.makeMacro(function(e,t){return[[0,"fill",e,t,[null,null,1]],[1,"hidden",0,0,[0,null]]]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){if(void 0!==e[0]){var l,o=a.turtles.ithTurtle(a.turtles.companionTurtle(r));0<o.singer.inNoteBlock.length?o.singer.embeddedGraphics[last(o.singer.inNoteBlock)].push(n):o.singer.suppressOutput?(l=o.painter.penState,o.painter.penState=!1,o.painter.doStartFill(),o.painter.penState=l):o.painter.doStartFill();var s="_fill_"+r;t.setDispatchBlock(n,r,s);return t.setTurtleListener(r,s,function(){var e;0<o.singer.inNoteBlock.length?o.singer.embeddedGraphics[last(o.singer.inNoteBlock)].push(n):o.singer.suppressOutput?(e=o.painter.penState,o.painter.penState=!1,o.painter.doEndFill(),o.painter.penState=e):o.painter.doEndFill()}),[e[0],1]}}}]),r}(),w=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"penup",_("pen up"))).setPalette("pen",a),e.beginnerBlock(!0),e.setHelpString([_("The Pen-up block raises the pen so that it does not draw."),"documentation",""]),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l=a.turtles.ithTurtle(a.turtles.companionTurtle(r));0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doPenUp()}}]),r}(),S=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"pendown",_("pen down"))).setPalette("pen",a),e.beginnerBlock(!0),e.setHelpString([_("The Pen-down block lowers the pen so that it draws."),"documentation",""]),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l=a.turtles.ithTurtle(a.turtles.companionTurtle(r));0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doPenDown()}}]),r}(),y=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"setpensize",_("set pen size"))).setPalette("pen",a),e.piemenuValuesC1=[1,2,3,5,10,15,25,50,100],e.beginnerBlock(!0),e.setHelpString([_("The Set-pen-size block changes the size of the pen."),"documentation",""]),e.formBlock({args:1,defaults:[5]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doSetPensize(e[0])):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),C=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"settranslucency",_("set translucency"))).setPalette("pen",a),e.piemenuValuesC1=[100,90,80,70,60,50,40,30,20,10,0],e.setHelpString([_("The Set translucency block changes the opacity of the pen."),"documentation",""]),e.formBlock({args:1,defaults:[50]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l,o;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):(o=1-e[0]%101/100,l.painter.doSetPenAlpha(o))):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),B=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"sethue",_("set hue"))).setPalette("pen",a),e.piemenuValuesC1=[0,10,20,30,40,50,60,70,80,90],e.setHelpString([_("The Set hue block changes the color of the pen."),"documentation",""]),e.formBlock({args:1,defaults:[0]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doSetHue(e[0])):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),T=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"setshade",_("set shade"))).setPalette("pen",a),e.piemenuValuesC1=[100,90,80,70,60,50,40,30,20,10,0],e.beginnerBlock(!0),e.setHelpString([_("The Set-shade block changes the pen color from dark to light."),"documentation",""]),e.formBlock({args:1,defaults:[50]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doSetValue(e[0])):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),P=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"setgrey",_("set grey"))).setPalette("pen",a),e.piemenuValuesC1=[100,90,80,70,60,50,40,30,20,10,0],e.setHelpString([_("The Set grey block changes the vividness of the pen color."),"documentation",""]),e.formBlock({args:1,defaults:[100]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doSetChroma(e[0])):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),M=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"setcolor",_("set color"))).setPalette("pen",a),e.piemenuValuesC1=[0,10,20,30,40,50,60,70,80,90],e.beginnerBlock(!0),e.setHelpString([_("The Set-color block changes the pen color."),"documentation",""]),e.formBlock({args:1,defaults:[0]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var l;null!==e[0]?(l=a.turtles.ithTurtle(a.turtles.companionTurtle(r)),"string"==typeof e[0]?a.errorMsg(NANERRORMSG,n):t.inMatrix?(t.phraseMaker.addRowBlock(n),t.pitchBlocks.includes(n)||t.pitchBlocks.push(n),t.phraseMaker.rowLabels.push(a.blocks.blockList[n].name),t.phraseMaker.rowArgs.push(e[0])):0<l.singer.inNoteBlock.length?l.singer.embeddedGraphics[last(l.singer.inNoteBlock)].push(n):l.painter.doSetColor(e[0])):a.errorMsg(NOINPUTERRORMSG,n)}}]),r}();(new e).setup(a),(new t).setup(a),(new r).setup(a),(new n).setup(a),(new l).setup(a),(new o).setup(a),(new s).setup(a),(new i).setup(a),(new u).setup(a),(new c).setup(a),(new p).setup(a),(new h).setup(a),(new f).setup(a),(new k).setup(a),(new d).setup(a),(new g).setup(a),(new m).setup(a),(new v).setup(a),(new b).setup(a),(new S).setup(a),(new w).setup(a),(new y).setup(a),(new C).setup(a),(new B).setup(a),(new T).setup(a),(new P).setup(a),(new M).setup(a)}
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function setupExtrasBlocks(u){var e=function(){_inherits(r,LeftBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"float2string",_("fraction"))).setPalette("extras",u),e.setHelpString([_("Convert a float to a fraction")+" 0.5 -> 1/2","documentation",null,"float2string"]),e.parameter=!0,e.formBlock({args:1,argTypes:["anyin"]}),e}return _createClass(r,[{key:"arg",value:function(e,t,r,n){var a=u.blocks.blockList[r].connections[1];if(null===a)return u.errorMsg(NOINPUTERRORMSG,r),"0/1";var s=e.parseArg(e,t,a,r,n);return"number"==typeof s?s<0?(s*=-1,"-"+mixedNumber(s)):mixedNumber(s):(u.errorMsg(NANERRORMSG,r),"0/1")}}]),r}(),t=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"saveabc")).setPalette("extras",u),e.setHelpString(),e.formBlock({name:_("save as ABC"),args:1,argTypes:["textin"],defaults:[_("title")+".abc"]}),e.hidden=!0,e.deprecated=!0,e}return _createClass(r,[{key:"flow",value:function(e){1===e.length&&u.save.afterSaveAbc(e[0])}}]),r}(),r=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"savelilypond")).setPalette("extras",u),e.setHelpString(),e.formBlock({name:_("save as Lilypond"),args:1,argTypes:["textin"],defaults:[_("title")+".ly"]}),e.hidden=!0,e.deprecated=!0,e}return _createClass(r,[{key:"flow",value:function(e){1===e.length&&u.save.afterSaveLilypond(e[0])}}]),r}(),n=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"savesvg")).setPalette("extras",u),e.setHelpString(),e.formBlock({name:_("save as SVG"),args:1,argTypes:["textin"],defaults:[_("title")+".svg"]}),e.hidden=!0,e.deprecated=!0,e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){null!==e[0]?1===e.length&&(t.svgBackground&&(t.svgOutput='<rect x="0" y="0" height="'+t.canvas.height+'" width="'+t.canvas.width+'" fill="'+platformColor.background+'"/> '+t.svgOutput),u.save.saveSVG(e[0])):u.errorMsg(NOINPUTERRORMSG,n)}}]),r}(),a=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nobackground",_("no background"))).setPalette("extras",u),e.setHelpString([_("The No background block eliminates the background from the saved SVG output."),"documentation","","makehelp"]),e}return _createClass(r,[{key:"flow",value:function(e,t){t.svgBackground=!1}}]),r}(),s=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"showblocks",_("show blocks"))).setPalette("extras",u),e.setHelpString([_("The Show blocks block shows the blocks."),"documentation",""]),e}return _createClass(r,[{key:"flow",value:function(e,t){u.blocks.showBlocks(),t.turtleDelay=DEFAULTDELAY}}]),r}(),o=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"hideblocks",_("Hide blocks").toLowerCase())).setPalette("extras",u),e.setHelpString([_("The Hide blocks block hides the blocks."),"documentation",""]),e}return _createClass(r,[{key:"flow",value:function(e,t){u.blocks.hideBlocks(),t.activity.showBlocksAfterRun=!1,t.turtleDelay=0}}]),r}(),l=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"vspace","↓")).setPalette("extras",u),e.setHelpString([_("The Space block is used to add space between blocks."),"documentation",""]),e.extraWidth=-10,e.updateDockValue(0,"vspaceout"),e.updateDockValue(1,"vspacein"),e}return _createClass(r,[{key:"flow",value:function(){}}]),r}(),i=function(){_inherits(r,LeftBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"hspace","←")).setPalette("extras",u),e.setHelpString([_("The Space block is used to add space between blocks."),"documentation",""]),e.extraWidth=-10,e.formBlock({args:1,argTypes:["anyin"],outType:"anyout"}),e}return _createClass(r,[{key:"arg",value:function(e,t,r,n){var a=u.blocks.blockList[r].connections[1];return e.parseArg(e,t,a,r,n)}}]),r}(),c=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"wait",_("wait"))).setPalette("extras",u),e.setHelpString([_("The Wait block pauses the program for a specified number of seconds."),"documentation",""]),e.formBlock({args:1,defaults:[1]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r){var n,a=u.turtles.ithTurtle(r);1===e.length&&(n=(0<TONEBPM/a.singer.bpm.length?last(a.singer.bpm):Singer.masterBPM)/(1/e[0]),a.singer.previousTurtleTime=a.singer.turtleTime,a.singer.turtleTime+=n,a.doWait(e[0]))}}]),r}(),p=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"comment")).setPalette("extras",u),e.setHelpString([_("The Comment block prints a comment at the top of the screen when the program is running in slow mode."),"documentation",""]),e.formBlock({name:_("comment"),args:1,defaults:["Music Blocks"],argTypes:["anyin"]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r){null!==e[0]&&!u.turtles.ithTurtle(r).singer.suppressOutput&&0<t.turtleDelay&&u.textMsg(e[0].toString())}}]),r}(),f=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),e=t.call(this,"print",_("print")),u.beginnerMode?e.setPalette("media",u):e.setPalette("extras",u),e.beginnerBlock(!0),e.setHelpString([_("The Print block displays text at the top of the screen."),"documentation",""]),e.formBlock({args:1,defaults:["Music Blocks"],argTypes:["anyin"]}),e}return _createClass(r,[{key:"flow",value:function(e,t,r,n){var a,s=u.blocks.blockList[n].connections[1];if(t.inOscilloscope&&null!==s){for(var o=u.blocks.blockList[s].value,l=-1,i=0;i<u.turtles.getTurtleCount();i++){var c=u.turtles.getTurtle(i);c.inTrash||c.name===o&&(l=i)}-1<l&&t.oscilloscopeTurtles.indexOf(u.turtles.getTurtle(l))<0&&t.oscilloscopeTurtles.push(u.turtles.getTurtle(l))}else{t.inMatrix?t.phraseMaker.lyricsON=!0:t.inStatusMatrix||1===e.length&&null!==e[0]&&((a=u.turtles.ithTurtle(r)).singer.suppressOutput?t.runningLilypond&&0<a.singer.inNoteBlock.length&&t.notation.notationMarkup(r,e[0].toString()):"grid"===u.blocks.blockList[s].name?(new k).flow(e,t,r,n):0<a.singer.inNoteBlock.length?a.singer.embeddedGraphics[last(a.singer.inNoteBlock)].push(n):u.textMsg(e[0].toString()))}}}]),r}(),h=function(){_inherits(r,StackClampBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"drum")).setPalette("extras",u),e.setHelpString(),e.formBlock({name:_("start drum"),canCollapse:!0}),e.hidden=e.deprecated=!0,e}return _createClass(r,[{key:"flow",value:function(e){if(1===e.length)return[e[0],1]}}]),r}(),k=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"displaygrid",_("display grid"))).setPalette("extras",u),e.beginnerBlock(!0),e.setHelpString([_("The Display Grid Block changes the grid type"),"documentation",null]),e.formBlock({args:1,defaults:["Cartesian"],argTypes:["gridin"]}),e.makeMacro(function(e,t){return[[0,"displaygrid",e,t,[null,1,null]],[1,["grid",{value:"Cartesian"}],0,0,[0]]]}),e.hidden=e.deprecated=!0,e}return _createClass(r,[{key:"flow",value:function(e){e&&e[0]||(e=["Cartesian"]);var t=u.blocks.activity;switch(u.hideGrids(),e[0]){case _("Cartesian"):case"Cartesian":t._showCartesian();break;case _("polar"):case"polar":t._showPolar();break;case _("Cartesian/Polar"):case"Cartesian/Polar":t._showPolar(),t._showCartesian();break;case _("treble"):case"treble":t._showTreble();break;case _("grand staff"):case"grand staff":t._showGrand();break;case _("mezzo-soprano"):case"mezzo-soprano":t._showSoprano();break;case _("alto"):case"alto":t._showAlto();break;case _("tenor"):case"tenor":t._showTenor();break;case _("bass"):case"bass":t._showBass();break;case _("none"):}}}]),r}(),g=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"grid")).setPalette("extras",u),e.setHelpString(),e.formBlock({outType:"gridout"}),e}return r}(),d=function(){_inherits(r,ValueBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopValueBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({outType:"anyout"}),e.hidden=!0,e}return r}(),y=function(){_inherits(r,LeftBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopOneArgMathBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:1,argTypes:["anyin"],outType:"anyout"}),e.hidden=!0,e}return r}(),v=function(){_inherits(r,LeftBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopOneArgMathBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:2,argTypes:["anyin","anyin"],outType:"anyout"}),e.hidden=!0,e}return r}(),b=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopZeroArgBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.hidden=!0,e}return r}(),w=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopOneArgBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:1,argTypes:["anyin"]}),e.hidden=!0,e}return r}(),m=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopTwoArgBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:2,argTypes:["anyin","anyin"]}),e.hidden=!0,e}return r}(),C=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopThreeArgBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:3,argTypes:["anyin","anyin","anyin"]}),e.hidden=!0,e}return r}(),S=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"nopFourArgBlock",_("unknown"))).setPalette("extras",u),e.setHelpString(),e.formBlock({args:4,argTypes:["anyin","anyin","anyin","anyin"]}),e.hidden=!0,e}return r}(),B=function(){_inherits(r,FlowBlock);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,"debugger",_("debugger"))).setPalette("extras",u),e.setHelpString([_("The Debug block adds a debug point in your code. When reached, execution will pause and you can inspect variables."),"documentation","","debugger"]),e.formBlock({name:_("debugger")}),e}return _createClass(r,[{key:"flow",value:function(){var e=u.runMode;"slow"!==e&&"step"!==e||(u.logo.turtleDelay=-1)}}]),r}();(new t).setup(u),(new r).setup(u),(new n).setup(u),(new a).setup(u),(new s).setup(u),(new o).setup(u),(new e).setup(u),(new h).setup(u),(new k).setup(u),(new g).setup(u),(new l).setup(u),(new i).setup(u),(new c).setup(u),(new p).setup(u),(new f).setup(u),(new B).setup(u),(new d).setup(u),(new y).setup(u),(new v).setup(u),(new b).setup(u),(new w).setup(u),(new m).setup(u),(new C).setup(u),(new S).setup(u)}"undefined"!=typeof module&&module.exports&&(module.exports={setupExtrasBlocks:setupExtrasBlocks});
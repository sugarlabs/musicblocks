"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=_superPropBase(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}}).apply(null,arguments)}function _superPropBase(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);var r=o.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(o){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(o);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function setupBoxesBlocks(c){var e=function(){_inherits(r,FlowBlock);var o=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=o.call(this,e||"increment")).setPalette("boxes",c),t.beginnerBlock(!0),c.beginnerMode&&"ja"===t.lang?t.setHelpString([_("The Add-to block is used to add to the value stored in a box."),"documentation",""]):t.setHelpString([_("The Add-to block is used to add to the value stored in a box.")+" "+_("It can also be used with other blocks such as Color and Pen size."),"documentation",""]),t.formBlock({name:_("add"),args:2,argLabels:[_("to"),"ja"===t.lang?_("value1"):_("value")],argTypes:["anyin","anyin"]}),t}return _createClass(r,[{key:"flow",value:function(e,t,o,r){var n=2===e.length?e[1]:1;if(0<e.length){var a=c.blocks.blockList[r].connections[1];if("text"===c.blocks.blockList[a].name){var l=c.blocks.blockList[a].value;if(l in t.boxes)return void(t.boxes[l]=t.boxes[l]+n)}var s,i=e[0]+n;"namedbox"!==c.blocks.blockList[a].name||-1!==(s=SOLFEGENAMES.indexOf(c.blocks.blockList[a].value))&&(s=s>=SOLFEGENAMES.length?0:s,i=SOLFEGENAMES[s+n]);try{c.blocks.blockSetter(t,a,i,o)}catch(e){c.errorMsg(_("Block does not support incrementing."),a)}}}}]),r}(),t=function(){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,"incrementOne")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Add-1-to block adds one to the value stored in a box."),"documentation",""]),e.formBlock({name:_("add 1 to"),args:1,argTypes:["anyin"],argLabels:[""]}),e}return _createClass(n,[{key:"flow",value:function(e,t,o,r){e[1]=1,_get(_getPrototypeOf(n.prototype),"flow",this).call(this,e,t,o,r)}}]),n}(),o=function(){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,"decrementOne")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Subtract-1-from block subtracts one from the value stored in a box."),"documentation",""]),e.formBlock({name:_("subtract 1 from"),args:1,argTypes:["anyin"],argLabels:[""]}),e}return _createClass(n,[{key:"flow",value:function(e,t,o,r){e[1]=-1,_get(_getPrototypeOf(n.prototype),"flow",this).call(this,e,t,o,r)}}]),n}(),r=function(){_inherits(o,LeftBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"box")).setPalette("boxes",c),e.parameter=!0,e.setHelpString([_("The Box block returns the value stored in a box."),"documentation",null,"box1help"]),e.formBlock({name:_("box"),outType:"anyout",args:1,defaults:[_("box")],argTypes:["anyin"]}),e}return _createClass(o,[{key:"updateParameter",value:function(e,t,o){var r=c.blocks.blockList[o].connections[1],n=e.parseArg(e,t,r,o,e.receivedArg);return n in e.boxes?e.boxes[n]:(c.errorMsg(NOBOXERRORMSG,o,n),0)}},{key:"setter",value:function(e,t,o,r){var n=c.blocks.blockList[r].connections[1],a=e.parseArg(e,o,n,r,e.receivedArg);a in e.boxes?e.boxes[a]=t:c.errorMsg(NOBOXERRORMSG,r,a)}},{key:"arg",value:function(e,t,o,r){var n=c.blocks.blockList[o].connections[1];if(null===n)return c.errorMsg(NOINPUTERRORMSG,o),0;var a=e.parseArg(e,t,n,o,r);return a in e.boxes?e.boxes[a]:(c.errorMsg(NOBOXERRORMSG,o,a),0)}}]),o}(),n=function(){_inherits(o,ValueBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"namedbox")).setPalette("boxes",c),e.beginnerBlock(!0),e.parameter=!0,e.setHelpString([_("The Box block returns the value stored in a box."),"documentation",""]),e.extraWidth=20,e.formBlock({name:_("box"),outType:"anyout"}),e}return _createClass(o,[{key:"updateParameter",value:function(e,t,o){var r=c.blocks.blockList[o].privateData;return r in e.boxes?e.boxes[r]:(c.errorMsg(NOBOXERRORMSG,o,r),0)}},{key:"setter",value:function(e,t,o,r){var n=c.blocks.blockList[r].privateData;n in e.boxes?e.boxes[n]=t:c.errorMsg(NOBOXERRORMSG,r,n)}},{key:"arg",value:function(e,t,o){var r=c.blocks.blockList[o].privateData;if(e.inStatusMatrix&&"print"===c.blocks.blockList[c.blocks.blockList[o].connections[0]].name)e.statusFields.push([o,c.blocks.blockList[o].name]);else if(!e.updatingStatusMatrix)return r in e.boxes?e.boxes[r]:(c.errorMsg(NOBOXERRORMSG,o,r),0)}}]),o}(),a=function(){_inherits(o,FlowBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"storein2")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Store in block will store a value in a box."),"documentation",""]),e.formBlock({name:_("store in box"),args:1,argTypes:["anyin"],defaults:[4]}),e}return _createClass(o,[{key:"flow",value:function(e,t,o,r){var n,a;1===e.length&&(n=c.blocks.blockList[r].privateData,a=e[0],t.boxes[n]=a)}}]),o}(),l=function(){_inherits(o,FlowBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"storein")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Store in block will store a value in a box."),"documentation",""]),e.formBlock({name:_("store in"),args:2,argTypes:["anyin","anyin"],defaults:[_("box"),4],argLabels:"ja"===e.lang?[_("name1"),_("value1")]:[_("name"),_("value")]}),e}return _createClass(o,[{key:"flow",value:function(e,t){var o,r;2===e.length&&(o=e[0],r=e[1],t.boxes[o]=r)}}]),o}(),s=function(){_inherits(o,ValueBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"box2")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Box2 block returns the value stored in Box2."),"documentation",null,"box2help"]),e.formBlock({name:_("box2")}),e.makeMacro(function(e,t){return[[0,["namedbox",{value:"box2"}],e,t,[null]]]}),e}return o}(),i=function(){_inherits(o,FlowBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"storebox2")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Store in Box2 block is used to store a value in Box2."),"documentation",null,"box2help"]),e.formBlock({name:_("store in box2"),args:1,defaults:[4]}),e.makeMacro(function(e,t){return[[0,["storein2",{value:"box2"}],e,t,[null,1,null]],[1,["number",{value:4}],e,t,[0]]]}),e}return o}(),u=function(){_inherits(o,ValueBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"box1")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Box1 block returns the value stored in Box1."),"documentation",null,"box1help"]),e.formBlock({name:_("box1")}),e.makeMacro(function(e,t){return[[0,["namedbox",{value:"box1"}],e,t,[null]]]}),e}return o}(),b=function(){_inherits(o,FlowBlock);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this,"storebox1")).setPalette("boxes",c),e.beginnerBlock(!0),e.setHelpString([_("The Store in Box1 block is used to store a value in Box1."),"documentation",null,"box1help"]),e.formBlock({name:_("store in box1"),args:1,defaults:[4]}),e.makeMacro(function(e,t){return[[0,["storein2",{value:"box1"}],e,t,[null,1,null]],[1,["number",{value:4}],e,t,[0]]]}),e}return o}();(new o).setup(c),(new t).setup(c),(new e).setup(c),(new r).setup(c),(new n).setup(c),(new a).setup(c),(new l).setup(c),(new s).setup(c),(new i).setup(c),(new u).setup(c),(new b).setup(c)}"undefined"!=typeof module&&module.exports&&(module.exports={setupBoxesBlocks:setupBoxesBlocks});
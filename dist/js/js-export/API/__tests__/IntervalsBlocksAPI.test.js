"use strict";function asyncGeneratorStep(e,t,a,n,r,o,c){try{var l=e[o](c),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function _asyncToGenerator(l){return function(){var e=this,c=arguments;return new Promise(function(t,a){var n=l.apply(e,c);function r(e){asyncGeneratorStep(n,t,a,r,o,"next",e)}function o(e){asyncGeneratorStep(n,t,a,r,o,"throw",e)}r(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface;var IntervalsBlocksAPI=require("../IntervalsBlocksAPI"),MusicBlocks={BLK:"mockedBlock"};global.MusicBlocks=MusicBlocks,describe("IntervalsBlocksAPI",function(){var a;beforeEach(function(){(a=new IntervalsBlocksAPI).turIndex=1,a.ENDFLOWCOMMAND="end",a.runCommand=jest.fn()}),test("setKey calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue(["C","major"]),a.setKey("C","major"),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setKey",["C","major"]),expect(a.runCommand).toHaveBeenCalledWith("setKey",["C","major",1])}),test("defineMode calls runCommand and awaits flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["dorian",t]),e.next=4,a.defineMode("dorian",t);case 4:expect(JSInterface.validateArgs).toHaveBeenCalledWith("defineMode",["dorian",t]),expect(a.runCommand).toHaveBeenCalledWith("defineMode",["dorian",1,"mockedBlock"]),expect(t).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("setScalarInterval calls runCommand and awaits flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([5,t]),e.next=4,a.setScalarInterval(5,t);case 4:expect(JSInterface.validateArgs).toHaveBeenCalledWith("setScalarInterval",[5,t]),expect(a.runCommand).toHaveBeenCalledWith("setScalarInterval",[5,1]),expect(t).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("setSemitoneInterval calls runCommand and awaits flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([7,t]),e.next=4,a.setSemitoneInterval(7,t);case 4:expect(JSInterface.validateArgs).toHaveBeenCalledWith("setSemitoneInterval",[7,t]),expect(a.runCommand).toHaveBeenCalledWith("setSemitoneInterval",[7,1]),expect(t).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("setTemperament calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue(["equal",440,4]),a.setTemperament("equal",440,4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setTemperament",["equal",440,4]),expect(a.runCommand).toHaveBeenCalledWith("setTemperament",["equal",440,4])})});
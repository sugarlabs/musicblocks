"use strict";function asyncGeneratorStep(e,t,a,n,r,c,o){try{var s=e[c](o),u=s.value}catch(e){return void a(e)}s.done?t(u):Promise.resolve(u).then(n,r)}function _asyncToGenerator(s){return function(){var e=this,o=arguments;return new Promise(function(t,a){var n=s.apply(e,o);function r(e){asyncGeneratorStep(n,t,a,r,c,"next",e)}function c(e){asyncGeneratorStep(n,t,a,r,c,"throw",e)}r(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface,global.MusicBlocks={BLK:"mockBlock"};var DrumBlocksAPI=require("../DrumBlocksAPI");describe("DrumBlocksAPI",function(){var n;beforeEach(function(){(n=new DrumBlocksAPI).turIndex=0,n.runCommand=jest.fn()}),afterEach(function(){jest.clearAllMocks()}),test("playDrum calls runCommand with correct arguments",function(){JSInterface.validateArgs.mockReturnValue(["snare"]),n.playDrum("snare"),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playDrum",["snare"]),expect(n.runCommand).toHaveBeenCalledWith("playDrum",["snare",0,global.MusicBlocks.BLK])}),test("setDrum calls runCommand and executes flow function",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["kick",t]),e.next=4,n.setDrum("kick",t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("setDrum",["kick",t]),expect(n.runCommand).toHaveBeenCalledWith("setDrum",["kick",0]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("mapPitchToDrum calls runCommand and executes flow function",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["tom",t]),e.next=4,n.mapPitchToDrum("tom",t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("mapPitchToDrum",["tom",t]),expect(n.runCommand).toHaveBeenCalledWith("mapPitchToDrum",["tom",0]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("playNoise calls runCommand with correct arguments",function(){JSInterface.validateArgs.mockReturnValue(["white"]),n.playNoise("white"),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playNoise",["white"]),expect(n.runCommand).toHaveBeenCalledWith("playNoise",["white",0])})});
"use strict";function asyncGeneratorStep(e,t,a,n,r,l,o){try{var c=e[l](o),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function _asyncToGenerator(c){return function(){var e=this,o=arguments;return new Promise(function(t,a){var n=c.apply(e,o);function r(e){asyncGeneratorStep(n,t,a,r,l,"next",e)}function l(e){asyncGeneratorStep(n,t,a,r,l,"throw",e)}r(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface;var PenBlocksAPI=require("../PenBlocksAPI");global.globalActivity={turtles:{refreshCanvas:jest.fn()},logo:{turtles:{setBackgroundColor:jest.fn()}}},describe("PenBlocksAPI",function(){var a;beforeEach(function(){(a=new PenBlocksAPI).turIndex=1,a.ENDFLOW="end",a.runCommand=jest.fn()}),test("setColor calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([50]),a.setColor(50),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setColor",[50]),expect(a.runCommand).toHaveBeenCalledWith("doSetColor",[50])}),test("setGrey calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([30]),a.setGrey(30),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setGrey",[30]),expect(a.runCommand).toHaveBeenCalledWith("doSetChroma",[30])}),test("setShade calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([70]),a.setShade(70),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setShade",[70]),expect(a.runCommand).toHaveBeenCalledWith("doSetValue",[70])}),test("setHue calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([120]),a.setHue(120),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setHue",[120]),expect(a.runCommand).toHaveBeenCalledWith("doSetHue",[120])}),test("setTranslucency calculates and calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([80]),a.setTranslucency(80),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setTranslucency",[80]),expect(a.runCommand).toHaveBeenCalledWith("doSetPenAlpha",[1-.8])}),test("setPensize calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([10]),a.setPensize(10),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setPensize",[10]),expect(a.runCommand).toHaveBeenCalledWith("doSetPensize",[10])}),test("penUp calls runCommand",function(){a.penUp(),expect(a.runCommand).toHaveBeenCalledWith("doPenUp")}),test("penDown calls runCommand",function(){a.penDown(),expect(a.runCommand).toHaveBeenCalledWith("doPenDown")}),test("fillShape calls commands and refreshCanvas",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),e.next=3,a.fillShape(t);case 3:expect(a.runCommand).toHaveBeenCalledWith("doStartFill"),expect(t).toHaveBeenCalled(),expect(a.runCommand).toHaveBeenCalledWith("doEndFill"),expect(global.globalActivity.turtles.refreshCanvas).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("hollowLine calls commands and refreshCanvas",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),e.next=3,a.hollowLine(t);case 3:expect(a.runCommand).toHaveBeenCalledWith("doStartHollowLine"),expect(t).toHaveBeenCalled(),expect(a.runCommand).toHaveBeenCalledWith("doEndHollowLine"),expect(global.globalActivity.turtles.refreshCanvas).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("fillBackground calls setBackgroundColor",function(){a.fillBackground(),expect(a.runCommand).toHaveBeenCalledWith("_anonymous",expect.any(Function)),(0,a.runCommand.mock.calls[0][1])(),expect(global.globalActivity.logo.turtles.setBackgroundColor).toHaveBeenCalledWith(1)}),test("setFont calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue(["Arial"]),a.setFont("Arial"),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setFont",["Arial"]),expect(a.runCommand).toHaveBeenCalledWith("doSetFont",["Arial"])})});
"use strict";function asyncGeneratorStep(e,t,a,n,r,c,i){try{var o=e[c](i),s=o.value}catch(e){return void a(e)}o.done?t(s):Promise.resolve(s).then(n,r)}function _asyncToGenerator(o){return function(){var e=this,i=arguments;return new Promise(function(t,a){var n=o.apply(e,i);function r(e){asyncGeneratorStep(n,t,a,r,c,"next",e)}function c(e){asyncGeneratorStep(n,t,a,r,c,"throw",e)}r(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface;var PitchBlocksAPI=require("../PitchBlocksAPI");global.MusicBlocks={BLK:"mockBlock"},global.Singer={PitchActions:{numToPitch:jest.fn()}},describe("PitchBlocksAPI",function(){var n;beforeEach(function(){(n=new PitchBlocksAPI).turIndex=1,n.ENDFLOWCOMMAND="end",n.runCommand=jest.fn()}),test("playPitch calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue(["C",4]),n.playPitch("C",4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playPitch",["C",4]),expect(n.runCommand).toHaveBeenCalledWith("playPitch",["C",4,0,1,MusicBlocks.BLK])}),test("stepPitch calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([2]),n.stepPitch(2),expect(JSInterface.validateArgs).toHaveBeenCalledWith("stepPitch",[2]),expect(n.runCommand).toHaveBeenCalledWith("stepPitch",[2,1])}),test("playNthModalPitch calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([3,5]),n.playNthModalPitch(3,5),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playNthModalPitch",[3,5]),expect(n.runCommand).toHaveBeenCalledWith("playNthModalPitch",[3,5,1,MusicBlocks.BLK])}),test("playPitchNumber calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([7]),n.playPitchNumber(7),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playPitchNumber",[7]),expect(n.runCommand).toHaveBeenCalledWith("playPitchNumber",[7,1,MusicBlocks.BLK])}),test("playHertz calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([440]),n.playHertz(440),expect(JSInterface.validateArgs).toHaveBeenCalledWith("playHertz",[440]),expect(n.runCommand).toHaveBeenCalledWith("playHertz",[440,1])}),test("setAccidental calls runCommand with validated arguments and executes flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["sharp",t]),e.next=4,n.setAccidental("sharp",t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("setAccidental",["sharp",t]),expect(n.runCommand).toHaveBeenCalledWith("setAccidental",["sharp",1,MusicBlocks.BLK]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("setScalarTranspose calls runCommand with validated arguments and executes flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([2,t]),e.next=4,n.setScalarTranspose(2,t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("setScalarTranspose",[2,t]),expect(n.runCommand).toHaveBeenCalledWith("setScalarTranspose",[2,1]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("setSemitoneTranspose calls runCommand with validated arguments and executes flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([1,t]),e.next=4,n.setSemitoneTranspose(1,t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("setSemitoneTranspose",[1,t]),expect(n.runCommand).toHaveBeenCalledWith("setSemitoneTranspose",[1,1]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("setRegister calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([3]),n.setRegister(3),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setRegister",[3]),expect(n.runCommand).toHaveBeenCalledWith("setRegister",[3,1])}),test("invert calls runCommand with validated arguments and executes flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["inversionName",4,"mode",t]),e.next=4,n.invert("inversionName",4,"mode",t);case 4:a=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("invert",["inversionName",4,"mode",t]),expect(n.runCommand).toHaveBeenCalledWith("invert",["inversionName",4,"mode",1]),expect(t).toHaveBeenCalled(),expect(a).toBe(n.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("setPitchNumberOffset calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([7,3]),n.setPitchNumberOffset(7,3),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setPitchNumberOffset",[7,3]),expect(n.runCommand).toHaveBeenCalledWith("setPitchNumberOffset",[7,3,1])}),test("numToPitch calls numToPitch in Singer.PitchActions with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([5]),Singer.PitchActions.numToPitch.mockReturnValue("C");var e=n.numToPitch(5);expect(JSInterface.validateArgs).toHaveBeenCalledWith("numToPitch",[5]),expect(Singer.PitchActions.numToPitch).toHaveBeenCalledWith(5,"pitch",1),expect(e).toBe("C")}),test("numToOctave calls numToPitch in Singer.PitchActions with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([5]),Singer.PitchActions.numToPitch.mockReturnValue(4);var e=n.numToOctave(5);expect(JSInterface.validateArgs).toHaveBeenCalledWith("numToOctave",[5]),expect(Singer.PitchActions.numToPitch).toHaveBeenCalledWith(5,"octave",1),expect(e).toBe(4)})});
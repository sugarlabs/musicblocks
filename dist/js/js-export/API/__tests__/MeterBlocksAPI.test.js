"use strict";function asyncGeneratorStep(e,t,a,n,r,o,l){try{var s=e[o](l),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function _asyncToGenerator(s){return function(){var e=this,l=arguments;return new Promise(function(t,a){var n=s.apply(e,l);function r(e){asyncGeneratorStep(n,t,a,r,o,"next",e)}function o(e){asyncGeneratorStep(n,t,a,r,o,"throw",e)}r(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface;var MeterBlocksAPI=require("../MeterBlocksAPI"),Singer={MeterActions:{getNotesPlayed:jest.fn()}};global.Singer=Singer,describe("MeterBlocksAPI",function(){var a;beforeEach(function(){(a=new MeterBlocksAPI).turIndex=1,a.ENDFLOWCOMMAND="end",a.runCommand=jest.fn()}),test("setMeter calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([4,4]),a.setMeter(4,4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setMeter",[4,4]),expect(a.runCommand).toHaveBeenCalledWith("setMeter",[4,4,1])}),test("setBPM calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([120,4]),a.setBPM(120,4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setBPM",[120,4]),expect(a.runCommand).toHaveBeenCalledWith("setBPM",[120,4,1])}),test("setMasterBPM calls runCommand with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([100,4]),a.setMasterBPM(100,4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("setMasterBPM",[100,4]),expect(a.runCommand).toHaveBeenCalledWith("setMasterBPM",[100,4])}),test("onEveryNoteDo calls runCommand with validated arguments",function(){var e=jest.fn();JSInterface.validateArgs.mockReturnValue([e]),a.onEveryNoteDo(e),expect(JSInterface.validateArgs).toHaveBeenCalledWith("onEveryNoteDo",[e]),expect(a.runCommand).toHaveBeenCalledWith("onEveryNoteDo",[e,null,null,1])}),test("onEveryBeatDo calls runCommand with validated arguments",function(){var e=jest.fn();JSInterface.validateArgs.mockReturnValue([e]),a.onEveryBeatDo(e),expect(JSInterface.validateArgs).toHaveBeenCalledWith("onEveryBeatDo",[e]),expect(a.runCommand).toHaveBeenCalledWith("onEveryBeatDo",[e,null,null,1])}),test("onStrongBeatDo calls runCommand with validated arguments",function(){var e=jest.fn();JSInterface.validateArgs.mockReturnValue([2,e]),a.onStrongBeatDo(2,e),expect(JSInterface.validateArgs).toHaveBeenCalledWith("onStrongBeatDo",[2,e]),expect(a.runCommand).toHaveBeenCalledWith("onStrongBeatDo",[2,e,null,null,1])}),test("onWeakBeatDo calls runCommand with validated arguments",function(){var e=jest.fn();JSInterface.validateArgs.mockReturnValue([e]),a.onWeakBeatDo(e),expect(JSInterface.validateArgs).toHaveBeenCalledWith("onWeakBeatDo",[e]),expect(a.runCommand).toHaveBeenCalledWith("onWeakBeatDo",[e,null,null,1])}),test("setNoClock calls runCommand and awaits flow",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([t]),e.next=4,a.setNoClock(t);case 4:expect(JSInterface.validateArgs).toHaveBeenCalledWith("setNoClock",[t]),expect(a.runCommand).toHaveBeenCalledWith("setNoClock",[1]),expect(t).toHaveBeenCalled();case 7:case"end":return e.stop()}},e)}))),test("getNotesPlayed calls Singer.MeterActions.getNotesPlayed with validated arguments",function(){JSInterface.validateArgs.mockReturnValue([4]),a.getNotesPlayed(4),expect(JSInterface.validateArgs).toHaveBeenCalledWith("getNotesPlayed",[4]),expect(Singer.MeterActions.getNotesPlayed).toHaveBeenCalledWith(4,1)})});
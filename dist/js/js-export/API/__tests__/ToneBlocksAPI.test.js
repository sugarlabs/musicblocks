"use strict";function asyncGeneratorStep(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,a)}function _asyncToGenerator(s){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=s.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}var JSInterface={validateArgs:jest.fn()};global.JSInterface=JSInterface;var ToneBlocksAPI=require("../ToneBlocksAPI");global.MusicBlocks={BLK:"mockBlock"},describe("ToneBlocksAPI",function(){var r;beforeEach(function(){(r=new ToneBlocksAPI).turIndex=1,r.ENDFLOWCOMMAND="end",r.runCommand=jest.fn()}),test("setInstrument calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue(["piano",t]),e.next=4,r.setInstrument("piano",t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("setInstrument",["piano",t]),expect(r.runCommand).toHaveBeenCalledWith("setTimbre",["piano",r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doVibrato calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([.5,2,t]),e.next=4,r.doVibrato(.5,2,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doVibrato",[.5,2,t]),expect(r.runCommand).toHaveBeenCalledWith("doVibrato",[.5,2,r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doChorus calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([1.2,.3,.7,t]),e.next=4,r.doChorus(1.2,.3,.7,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doChorus",[1.2,.3,.7,t]),expect(r.runCommand).toHaveBeenCalledWith("doChorus",[1.2,.3,.7,r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doPhaser calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([.8,2,440,t]),e.next=4,r.doPhaser(.8,2,440,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doPhaser",[.8,2,440,t]),expect(r.runCommand).toHaveBeenCalledWith("doPhaser",[.8,2,440,r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doTremolo calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([4,.5,t]),e.next=4,r.doTremolo(4,.5,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doTremolo",[4,.5,t]),expect(r.runCommand).toHaveBeenCalledWith("doTremolo",[4,.5,r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doDistortion calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([.8,t]),e.next=4,r.doDistortion(.8,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doDistortion",[.8,t]),expect(r.runCommand).toHaveBeenCalledWith("doDistortion",[.8,r.turIndex]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)}))),test("doHarmonic calls runCommand with validated arguments",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=jest.fn(),JSInterface.validateArgs.mockReturnValue([3,t]),e.next=4,r.doHarmonic(3,t);case 4:n=e.sent,expect(JSInterface.validateArgs).toHaveBeenCalledWith("doHarmonic",[3,t]),expect(r.runCommand).toHaveBeenCalledWith("doHarmonic",[3,r.turIndex,MusicBlocks.BLK]),expect(t).toHaveBeenCalled(),expect(n).toBe(r.ENDFLOWCOMMAND);case 9:case"end":return e.stop()}},e)})))});
"use strict";global.NOTATIONNOTE=0,global.NOTATIONDURATION=1,global.NOTATIONDOTCOUNT=2,global.NOTATIONTUPLETVALUE=3,global.NOTATIONROUNDDOWN=4,global.NOTATIONINSIDECHORD=5,global.NOTATIONSTACCATO=6,global.frequencyToPitch=jest.fn(function(t){return["G♯","4"]}),global.toFraction=jest.fn(function(t){return[1,1]});var _require=require("../abc"),getABCHeader=_require.getABCHeader,processABCNotes=_require.processABCNotes,saveAbcOutput=_require.saveAbcOutput,ACCIDENTAL_MAP=_require.ACCIDENTAL_MAP,OCTAVE_NOTATION_MAP=_require.OCTAVE_NOTATION_MAP;describe("getABCHeader",function(){it("should return the correct ABC header",function(){expect(getABCHeader()).toBe("X:1\nT:Music Blocks composition\nC:Mr. Mouse\nL:1/16\nM:C\n")})}),describe("processABCNotes",function(){var t;beforeEach(function(){t={notationNotes:{0:""},notation:{notationStaging:{0:[[["G♯4"],4,0,null,null,-1,!1],[["F4"],4,0,null,null,-1,!1],[["G♯4"],2,0,null,null,-1,!1]]}}}}),it("should process notes and update notationNotes correctly",function(){processABCNotes(t,"0"),expect(t.notationNotes[0]).toBe("G^4 G^4 F4 F4 G^2 G^8 ")})}),describe("saveAbcOutput",function(){var e;beforeEach(function(){e={logo:{notationOutput:"",notationNotes:{0:""},notation:{notationStaging:{0:[[["G♯4"],4,0,null,null,-1,!1],[["F4"],4,0,null,null,-1,!1],[["G♯4"],2,0,null,null,-1,!1]]}}},turtles:{ithTurtle:function(){return{singer:{keySignature:"C major"}}}}}}),it("should generate the correct ABC notation output",function(){var t=saveAbcOutput(e);expect(t).toBe("X:1\nT:Music Blocks composition\nC:Mr. Mouse\nL:1/16\nM:C\nK:CMAJOR\nG^4 G^4 F4 F4 G^2 G^8 \n")})}),describe("processABCNotes - Tuplet Handling",function(){it("should process tuplets correctly",function(){var t={notationNotes:{0:""},notation:{notationStaging:{0:[[["G♯4"],4,0,3,2,-1,!1],[["F4"],4,0,3,2,-1,!1],[["G♯4"],4,0,3,2,-1,!1]]}}};processABCNotes(t,"0"),expect(t.notationNotes[0]).toBe("(1:1G^ 2G^ 2G^ 2  ")})}),describe("OCTAVE_NOTATION_MAP",function(){it("should correctly map octaves to ABC notation",function(){expect(OCTAVE_NOTATION_MAP[10]).toBe("'''''"),expect(OCTAVE_NOTATION_MAP[2]).toBe(",,"),expect(OCTAVE_NOTATION_MAP[1]).toBe(",,,"),expect(OCTAVE_NOTATION_MAP[0]).toBeUndefined()})}),describe("ACCIDENTAL_MAP",function(){test("should correctly map accidentals to ABC notation",function(){expect(ACCIDENTAL_MAP["♯"]).toBe("^"),expect(ACCIDENTAL_MAP["♭"]).toBe("_")}),test("should return undefined for unmapped accidentals",function(){expect(ACCIDENTAL_MAP["♮"]).toBeUndefined()})});
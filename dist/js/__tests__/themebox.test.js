"use strict";global._=jest.fn(function(e){return e});var ThemeBox=require("../themebox");describe("ThemeBox",function(){var e,t;beforeEach(function(){e={storage:{themePreference:"light"},textMsg:jest.fn()},jest.spyOn(global.Storage.prototype,"getItem").mockImplementation(function(e){return"themePreference"===e?"light":null}),jest.spyOn(global.Storage.prototype,"setItem").mockImplementation(function(){}),Object.defineProperty(window,"location",{value:{reload:jest.fn()},writable:!0}),t=new ThemeBox(e)}),afterEach(function(){jest.restoreAllMocks()}),test("constructor initializes theme from activity storage",function(){expect(t._theme).toBe("light")}),test("light_onclick() sets theme to light and updates preference",function(){t.light_onclick(),expect(t._theme).toBe("light"),expect(localStorage.getItem).toHaveBeenCalledWith("themePreference"),expect(e.textMsg).toHaveBeenCalledWith("Music Blocks is already set to this theme.")}),test("dark_onclick() sets theme to dark and updates preference",function(){t.dark_onclick(),expect(t._theme).toBe("dark"),expect(e.storage.themePreference).toBe("dark"),expect(window.location.reload).toHaveBeenCalled()}),test("setPreference() updates theme and reloads if different",function(){localStorage.getItem.mockReturnValue("dark"),t.light_onclick(),expect(e.storage.themePreference).toBe("light"),expect(window.location.reload).toHaveBeenCalled()}),test("setPreference() does not reload if theme is unchanged",function(){t.light_onclick(),expect(window.location.reload).not.toHaveBeenCalled()})});
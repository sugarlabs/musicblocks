"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _require=require("../utils/platformstyle"),platformColor=_require.platformColor;global.platformColor=platformColor,jest.mock("../utils/platformstyle",function(){return{platformColor:{stopIconColor:"#ea174c"}}}),global.jQuery=jest.fn(function(){return{on:jest.fn(),trigger:jest.fn(),tooltip:jest.fn(),dropdown:jest.fn()}}),global.jQuery.noConflict=jest.fn(function(){return global.jQuery}),global.window={localStorage:{languagePreference:"en"},navigator:{language:"en-US"},document:{getElementById:jest.fn(function(){return{style:{}}})}},global.localStorage=window.localStorage;var Toolbar=require("../toolbar");global.document.getElementById=jest.fn(function(e){return{id:e,style:{},setAttribute:jest.fn(),innerHTML:"",classList:{add:jest.fn()},appendChild:jest.fn()}}),global.docById=jest.fn(function(e){return{id:e,setAttribute:jest.fn(),innerHTML:"",style:{},classList:{add:jest.fn()},appendChild:jest.fn()}}),global._=jest.fn(function(e){return e}),global.$j=jest.fn(function(){return{tooltip:jest.fn(),dropdown:jest.fn()}}),describe("Toolbar Class",function(){var o,s;beforeEach(function(){global.window.localStorage.languagePreference="en",global._THIS_IS_MUSIC_BLOCKS_=!1,o=new Toolbar,s={beginnerMode:!0}}),afterEach(function(){jest.clearAllMocks()}),test("initializes with correct properties and sets activity",function(){var e={someProp:"someValue"};o.init(e),expect(o.activity).toEqual(e),expect(o.language).toBe("en"),expect(o.tooltipsDisabled).toBe(!1)}),test("sets correct strings for _THIS_IS_MUSIC_BLOCKS_ true",function(){global._THIS_IS_MUSIC_BLOCKS_=!0,o.init({}),expect(global._).toHaveBeenCalledTimes(134),expect(global._).toHaveBeenNthCalledWith(1,"About Music Blocks")}),test("sets correct strings for _THIS_IS_MUSIC_BLOCKS_ false",function(){global._THIS_IS_MUSIC_BLOCKS_=!1,o.init({}),expect(global._).toHaveBeenCalledTimes(116),expect(global._).toHaveBeenNthCalledWith(1,"About Turtle Blocks")}),test("handles language fallback when localStorage is empty",function(){delete global.window.localStorage.languagePreference,o.init({}),expect(o.language).toBe("en")}),test("falls back to navigator language if localStorage is empty",function(){delete global.window.localStorage.languagePreference,o=new Toolbar,expect(o.language).toBe("en-US")}),test("init sets activity and updates beginner/advanced mode display",function(){var t={style:{display:""},setAttribute:jest.fn(),classList:{add:jest.fn()}},n={style:{display:""},setAttribute:jest.fn(),classList:{add:jest.fn()}};global.docById.mockImplementation(function(e){return"beginnerMode"===e?t:"advancedMode"===e?n:{setAttribute:jest.fn(),style:{},classList:{add:jest.fn()}}}),o.init(s),expect(o.activity).toBe(s),expect(t.style.display).toBe("none"),expect(n.style.display).toBe("block"),expect(t.setAttribute).toHaveBeenCalled(),expect(n.setAttribute).toHaveBeenCalled()}),beforeEach(function(){jest.useFakeTimers(),jest.spyOn(global,"clearTimeout"),global.saveButton={disabled:!1,className:""},global.saveButtonAdvanced={disabled:!1,className:""}}),afterEach(function(){jest.useRealTimers()}),test("renderLogoIcon sets up logo with correct interactions",function(){var t={"mb-logo":{innerHTML:"",onmouseenter:null,onmouseleave:null,onclick:null,style:{}}};global.docById=jest.fn(function(e){return t[e]}),global.document={body:{style:{cursor:""}}};var e=new Toolbar;e.activity={},e.language="en";var n=jest.fn();e.renderLogoIcon(n),expect(t["mb-logo"].innerHTML).toBe(""),expect(_typeof(t["mb-logo"].onmouseenter)).toBe("function"),expect(_typeof(t["mb-logo"].onmouseleave)).toBe("function"),expect(_typeof(t["mb-logo"].onclick)).toBe("function"),t["mb-logo"].onmouseenter(),expect(document.body.style.cursor).toBe("pointer"),t["mb-logo"].onmouseleave(),expect(document.body.style.cursor).toBe("default"),t["mb-logo"].onclick(),expect(n).toHaveBeenCalledWith(e.activity),e.language="ja",e.renderLogoIcon(n),expect(t["mb-logo"].innerHTML).toContain("logo-ja.svg"),expect(t["mb-logo"].innerHTML).toContain("transform: scale(0.85)"),t["mb-logo"].onclick(),expect(n).toHaveBeenCalledTimes(2)}),test("renderPlayIcon sets onclick and updates play/stop button behavior",function(){var t={play:{onclick:global.play_button_debounce_timeout=null,addEventListener:jest.fn()},stop:{style:{color:""},addEventListener:jest.fn()},record:{className:""}};global.docById.mockImplementation(function(e){return t[e]||{}});var e={hideMsgs:jest.fn(),beginnerMode:!0};o.activity=e;var n=jest.fn();o.renderPlayIcon(n),t.play.onclick(),expect(n).toHaveBeenCalledWith(e),expect(t.stop.style.color).toBe(o.stopIconColorWhenPlaying),expect(global.saveButtonAdvanced.disabled).toBe(!0),expect(global.saveButton.className).toBe("grey-text inactiveLink"),expect(t.record.className).toBe("grey-text inactiveLink"),expect(t.stop.addEventListener).toHaveBeenCalledWith("click",expect.any(Function)),(0,t.stop.addEventListener.mock.calls[0][1])(),expect(e.hideMsgs).toHaveBeenCalled(),delete global.play_button_debounce_timeout}),test("renderStopIcon sets onclick and updates stop button behavior",function(){var t={onclick:null,style:{color:""}},n={className:"recording"};global.docById.mockImplementation(function(e){return"stop"===e?t:"record"===e?n:{}});var e=jest.fn();o.renderStopIcon(e),t.onclick(),expect(e).toHaveBeenCalled(),expect(t.style.color).toBe("white"),expect(global.saveButton.disabled).toBe(!1),expect(global.saveButtonAdvanced.disabled).toBe(!1),expect(global.saveButton.className).toBe(""),expect(global.saveButtonAdvanced.className).toBe(""),expect(n.className).toBe("")}),test("renderNewProjectIcon displays modal and handles confirmation",function(){var t={"modal-container":{style:{display:""}},newdropdown:{innerHTML:"",appendChild:jest.fn()}};global.docById=jest.fn(function(e){return t[e]}),global.document={createElement:jest.fn(function(e){return{tagName:e,classList:{add:jest.fn()},textContent:"",style:{},onclick:null,appendChild:jest.fn()}})},global._=jest.fn(function(e){return e});var e=new Toolbar;e.activity=s;var n=jest.fn();e.renderNewProjectIcon(n),expect(t["modal-container"].style.display).toBe("flex"),expect(t.newdropdown.innerHTML).toBe("");var o=t.newdropdown.appendChild.mock.calls,l=o[0][0],a=o[1][0],c=o[2][0].firstChild;expect(l.textContent).toBe("New project"),expect(a.textContent).toBe("Are you sure you want to create a new project?"),expect(a.id).toBe("confirmation-message"),expect(c.textContent).toBe("Confirm"),expect(c.id).toBe("new-project"),c.onclick(),expect(t["modal-container"].style.display).toBe("none"),expect(n).toHaveBeenCalledWith(s)}),test("renderLoadIcon sets onclick and updates tooltip",function(){var e={setAttribute:jest.fn(),onclick:null};global.docById.mockReturnValue(e);var t=jest.fn();o.renderLoadIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(t).toHaveBeenCalledWith(o.activity)}),test("renderThemeSelectIcon sets onclick and updates theme selection",function(){var e={onclick:null},t=["light","dark"],n={setAttribute:jest.fn()};global.docById.mockReturnValue(e),global.localStorage.themePreference="light",o.renderThemeSelectIcon(n,t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),t.forEach(function(e){"light"===e&&expect(global.localStorage.themePreference).toBe("light")})}),test("renderWrapIcon toggles WRAP and updates tooltip",function(){var e={helpfulWheelItems:[{label:"Turtle Wrap Off",display:!1},{label:"Turtle Wrap On",display:!0}]};o.activity=e;var t={setAttribute:jest.fn(),onclick:null};global.docById.mockReturnValue(t),global.$j=jest.fn(function(){return{tooltip:jest.fn()}}),global.WRAP=!1,o.renderWrapIcon(),expect(t.onclick).toBeInstanceOf(Function),t.onclick(),expect(global.WRAP).toBe(!1),expect(t.setAttribute).toHaveBeenCalledWith("data-tooltip","Turtle Wrap Off"),expect(e.helpfulWheelItems[0].display).toBe(!1),t.onclick(),expect(t.setAttribute).toHaveBeenCalledWith("data-tooltip","Turtle Wrap On"),expect(e.helpfulWheelItems[0].display).toBe(!0)}),test("changeWrap toggles WRAP and updates tooltip",function(){var e={helpfulWheelItems:[{label:"Turtle Wrap Off",display:!1},{label:"Turtle Wrap On",display:!0}]},t={setAttribute:jest.fn()},n={style:{display:"block"}};global._=jest.fn(function(e){return e}),global.$j=jest.fn(function(){return{tooltip:jest.fn()}}),global.WRAP=!1,global.docById=jest.fn(function(e){return"wrapTurtle"===e?t:"helpfulWheelDiv"===e?n:{}}),expect(global.WRAP).toBe(!1),expect(e.helpfulWheelItems[0].display).toBe(!1),expect(e.helpfulWheelItems[1].display).toBe(!0),o.changeWrap(e),expect(t.setAttribute).toHaveBeenCalledWith("data-tooltip","Turtle Wrap On"),n.style.display="none",o.changeWrap(e),expect(n.style.display).toBe("none")}),test("renderSaveIcons handles all save button states correctly",function(){var t={saveButton:{onclick:null,style:{display:""}},saveButtonAdvanced:{onclick:null,style:{display:""}},"save-html-beg":{onclick:null},"save-png-beg":{onclick:null,disabled:!1,className:""},"save-html":{onclick:null},"save-svg":{onclick:null,disabled:!1,className:""},"save-png":{onclick:null,disabled:!1,className:""},"save-midi":{onclick:null},"save-wav":{onclick:null},"save-ly":{onclick:null},"save-abc":{onclick:null},"save-mxml":{onclick:null},"save-blockartwork-svg":{onclick:null},"save-blockartwork-png":{onclick:null}};global.docById=jest.fn(function(e){return t[e]||{onclick:null}});var e={beginnerMode:!0,language:"en",canvas:{width:100,height:100},logo:{},turtles:{},_THIS_IS_MUSIC_BLOCKS_:!1},n={html_onclick:jest.fn(),doSVG_onclick:jest.fn(),svg_onclick:jest.fn(),midi_onclick:jest.fn(),png_onclick:jest.fn(),wave_onclick:jest.fn(),ly_onclick:jest.fn(),abc_onclick:jest.fn(),mxml_onclick:jest.fn(),blockartworksvg_onclick:jest.fn(),blockartworkpng_onclick:jest.fn()},o=new Toolbar;o.activity=e,o.renderSaveIcons.apply(o,_toConsumableArray(Object.values(n))),expect(t.saveButton.style.display).toBe("block"),expect(t.saveButtonAdvanced.style.display).toBe("none"),t.saveButton.onclick(),t["save-html-beg"].onclick(),expect(n.html_onclick).toHaveBeenCalledWith(e),n.doSVG_onclick.mockReturnValueOnce(""),t.saveButton.onclick(),expect(t["save-png-beg"].disabled).toBe(!0),expect(t["save-png-beg"].className).toBe("grey-text inactiveLink"),n.doSVG_onclick.mockReturnValueOnce("<svg>data</svg>"),t.saveButton.onclick(),expect(t["save-png-beg"].disabled).toBe(!1),expect(t["save-png-beg"].className).toBe(""),t["save-png-beg"].onclick(),expect(n.png_onclick).toHaveBeenCalledWith(e),e.language="ja",o.renderSaveIcons.apply(o,_toConsumableArray(Object.values(n))),t.saveButton.onclick(),expect(n.html_onclick).toHaveBeenCalledWith(e),e.beginnerMode=!1,e._THIS_IS_MUSIC_BLOCKS_=!0,o.renderSaveIcons.apply(o,_toConsumableArray(Object.values(n))),expect(t.saveButton.style.display).toBe("none"),expect(t.saveButtonAdvanced.style.display).toBe("block"),t.saveButtonAdvanced.onclick(),n.doSVG_onclick.mockReturnValueOnce(""),t.saveButtonAdvanced.onclick(),expect(t["save-svg"].disabled).toBe(!0),expect(t["save-png"].disabled).toBe(!0),expect(t["save-svg"].className).toBe("grey-text inactiveLink"),expect(t["save-png"].className).toBe("grey-text inactiveLink"),t["save-svg"].onclick(),expect(n.svg_onclick).toHaveBeenCalledWith(e),t["save-png"].onclick(),expect(n.png_onclick).toHaveBeenCalledWith(e),t["save-blockartwork-svg"].onclick(),expect(n.blockartworksvg_onclick).toHaveBeenCalledWith(e),t["save-blockartwork-png"].onclick(),expect(n.blockartworkpng_onclick).toHaveBeenCalledWith(e)}),test("updateRecordButton hides record button",function(){var e={classList:{add:jest.fn()},style:{display:""},innerHTML:""};global.docById.mockReturnValue(e),global.fnBrowserDetect=jest.fn(function(){return"firefox"}),o.updateRecordButton(jest.fn()),expect(e.classList.add).toHaveBeenCalledWith("hide"),expect(e.style.display).toBe("")}),test("renderPlanetIcon sets onclick and updates planet icon behavior",function(){var t={planetIcon:{onclick:null,style:{display:""}},planetIconDisabled:{style:{display:""}},toolbars:{style:{display:""}},wheelDiv:{style:{display:""}},contextWheelDiv:{style:{display:""}}};global.docById.mockImplementation(function(e){return t[e]||{}});var e=jest.fn();o.activity={},o.renderPlanetIcon(!0,e),expect(t.planetIcon.onclick).toBeInstanceOf(Function),t.planetIcon.onclick(),expect(e).toHaveBeenCalledWith(o.activity),expect(t.toolbars.style.display).toBe("none"),expect(t.wheelDiv.style.display).toBe("none"),expect(t.contextWheelDiv.style.display).toBe("none"),o.renderPlanetIcon(!1,e),expect(t.planetIcon.style.display).toBe("none"),expect(t.planetIconDisabled.style.display).toBe("block")}),test("renderMenuIcon toggles menu visibility",function(){var t={menu:{onclick:null,innerHTML:"",style:{}},"aux-toolbar":{style:{display:""}},search:{classList:{toggle:jest.fn()}},toggleAuxBtn:{className:""},chooseKeyDiv:{style:{display:""}},movable:{style:{display:""}}};global.docById.mockImplementation(function(e){return t[e]||{}});var e=jest.fn();o.activity={},o.renderMenuIcon(e),expect(t.menu.onclick).toBeInstanceOf(Function);var n=t.menu.onclick;t["aux-toolbar"].style.display="none",n(),expect(e).toHaveBeenCalledWith(o.activity,!1),expect(t.menu.innerHTML).toBe("more_vert"),expect(t.toggleAuxBtn.className).toBe("blue darken-1"),expect(t.search.classList.toggle).toHaveBeenCalledWith("open"),t["aux-toolbar"].style.display="block",n(),expect(e).toHaveBeenCalledWith(o.activity,!0),expect(t["aux-toolbar"].style.display).toBe("none"),expect(t.menu.innerHTML).toBe("menu"),expect(t.toggleAuxBtn.className).toBe(NaN),expect(t.chooseKeyDiv.style.display).toBe("none")}),test("renderRunSlowlyIcon sets onclick and triggers slow run functionality",function(){var t={onclick:null,style:{display:""}},n={style:{color:""}};global.docById.mockImplementation(function(e){return"runSlowlyIcon"===e?t:"stop"===e?n:{}}),o.activity={beginnerMode:!1},o.language="en",o.stopIconColorWhenPlaying="#ff0000";var e=jest.fn();o.renderRunSlowlyIcon(e),expect(t.onclick).toBeInstanceOf(Function),t.onclick(),expect(e).toHaveBeenCalledWith(o.activity),expect(n.style.color).toBe("#ff0000"),expect(t.style.display).toBe(""),o.activity.beginnerMode=!0,o.language="ja",o.renderRunSlowlyIcon(e),expect(t.style.display).toBe("none")}),test("renderHelpIcon sets onclick and updates tooltip",function(){var e={setAttribute:jest.fn(),onclick:null};global.docById.mockReturnValue(e);var t=jest.fn();o.renderHelpIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(t).toHaveBeenCalledWith(o.activity)}),test("renderModeSelectIcon handles mode switching and UI updates",function(){var t={beginnerMode:{onclick:null,style:{display:""}},advancedMode:{onclick:null,style:{display:""}},record:{style:{display:""},onclick:null},displayStatsIcon:{style:{display:""},onclick:null},loadPluginIcon:{style:{display:""},onclick:null},delPluginIcon:{style:{display:""},onclick:null},enableHorizScrollIcon:{style:{display:""},onclick:null},disableHorizScrollIcon:{style:{display:""},onclick:null},toggleJavaScriptIcon:{style:{display:""}},saveButton:{style:{display:""}},saveButtonAdvanced:{style:{display:""}}};global.docById=jest.fn(function(e){return t[e]}),global.localStorage={setItem:jest.fn()},global.$j=jest.fn(function(){return{tooltip:jest.fn(),dropdown:jest.fn()}});var e=jest.fn(function(){return"<svg>mock</svg>"});global.doSVG=e;var n={beginnerMode:!0,helpfulWheelItems:[{label:"Enable horizontal scrolling",display:!1}],palettes:{updatePalettes:jest.fn()},refreshCanvas:jest.fn(),save:{saveHTML:jest.fn(),saveSVG:jest.fn(),saveMIDI:jest.fn(),savePNG:jest.fn(),saveWAV:jest.fn(),saveLilypond:jest.fn(),saveAbc:jest.fn(),saveMxml:jest.fn(),saveBlockArtwork:jest.fn(),saveBlockArtworkPNG:jest.fn()},toolbar:{renderSaveIcons:jest.fn(),updateRecordButton:jest.fn()}},o=new Toolbar;o.activity=n,o.tooltipsDisabled=!1;var l={onclick:jest.fn(),rec_onclick:jest.fn(),analytics_onclick:jest.fn(),openPlugin_onclick:jest.fn(),delPlugin_onclick:jest.fn(),setScroller:jest.fn()};o.renderModeSelectIcon(l.onclick,l.rec_onclick,l.analytics_onclick,l.openPlugin_onclick,l.delPlugin_onclick,l.setScroller),expect(t.beginnerMode.style.display).toBe("none"),expect(t.advancedMode.style.display).toBe("block"),expect(t.record.style.display).toBe("none"),["displayStatsIcon","loadPluginIcon","delPluginIcon","enableHorizScrollIcon","toggleJavaScriptIcon"].forEach(function(e){expect(t[e].style.display).toBe("none")}),expect(n.helpfulWheelItems[0].display).toBe(!1);var a=n.toolbar.renderSaveIcons.mock.calls[0];expect(n.toolbar.renderSaveIcons).toHaveBeenCalled(),a[0](),expect(n.save.saveHTML).toHaveBeenCalled(),expect(a[1]).toBe(e),a[2](),expect(n.save.saveSVG).toHaveBeenCalled(),a[3](),expect(n.save.saveMIDI).toHaveBeenCalled(),a[4](),expect(n.save.savePNG).toHaveBeenCalled(),a[5](),expect(n.save.saveWAV).toHaveBeenCalled(),a[6](),expect(n.save.saveLilypond).toHaveBeenCalled(),a[7](),expect(n.save.saveAbc).toHaveBeenCalled(),a[8](),expect(n.save.saveMxml).toHaveBeenCalled(),a[9](),expect(n.save.saveBlockArtwork).toHaveBeenCalled(),a[10](),expect(n.save.saveBlockArtworkPNG).toHaveBeenCalled()}),test("renderRunStepIcon sets onclick and handles Japanese beginner mode",function(){var t={onclick:null,style:{display:""}};global.docById.mockImplementation(function(e){return"runStepByStepIcon"===e?t:{}});var e={beginnerMode:!1},n=new Toolbar;n.activity=e,n.language="en";var o=jest.fn();n.renderRunStepIcon(o),expect(t.onclick).toBeInstanceOf(Function),t.onclick(),expect(o).toHaveBeenCalledWith(e),expect(t.style.display).toBe(""),n.language="ja",e.beginnerMode=!0,n.renderRunStepIcon(o),expect(t.style.display).toBe("none")}),test("renderMergeIcon sets onclick and triggers merge functionality",function(){var e={onclick:null};global.docById.mockReturnValue(e);var t=jest.fn();o.renderMergeIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(t).toHaveBeenCalledWith(o.activity)}),test("renderRestoreIcon sets onclick and triggers restore functionality",function(){var e={onclick:null};global.docById.mockReturnValue(e);var t=jest.fn();o.renderRestoreIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(t).toHaveBeenCalledWith(o.activity)}),test("renderChooseKeyIcon sets onclick and toggles key selection visibility",function(){var t={onclick:null},n={style:{display:"none"}};global.docById.mockImplementation(function(e){return"chooseKeyIcon"===e?t:"chooseKeyDiv"===e?n:{}});var e=jest.fn();global._THIS_IS_MUSIC_BLOCKS_=!0,o.renderChooseKeyIcon(e),expect(t.onclick).toBeInstanceOf(Function),t.onclick(),expect(e).toHaveBeenCalledWith(o.activity),expect(n.style.display).toBe("none")}),test("renderJavaScriptIcon sets onclick and triggers JavaScript editor",function(){var e={onclick:null};global.docById.mockReturnValue(e);var t=jest.fn();o.renderJavaScriptIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(t).toHaveBeenCalledWith(o.activity)}),test("renderLanguageSelectIcon sets onclick and updates language selection",function(){var e={onclick:null},t={setAttribute:jest.fn()};global.docById.mockReturnValue(e),o.renderLanguageSelectIcon(t),expect(e.onclick).toBeInstanceOf(Function),e.onclick(),expect(global.localStorage.languagePreference).toBeDefined()}),test("disableTooltips removes tooltips and sets tooltipsDisabled to true",function(){var e=jest.fn(function(){return{tooltip:jest.fn()}});o.disableTooltips(e),expect(e).toHaveBeenCalledWith(".tooltipped"),expect(o.tooltipsDisabled).toBe(!0)}),test("closeAuxToolbar hides auxiliary toolbar if visible",function(){var t={"aux-toolbar":{style:{display:"block"}},menu:{innerHTML:""},toggleAuxBtn:{className:"some-class blue darken-1"}};global.docById.mockImplementation(function(e){return t[e]||{}});var e=jest.fn();o.activity={},o.closeAuxToolbar(e),expect(t["aux-toolbar"].style.display).toBe("none"),expect(t.menu.innerHTML).toBe("menu"),expect(e).toHaveBeenCalledWith(o.activity,!1)})});
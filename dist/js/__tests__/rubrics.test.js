"use strict";global._=function(t){return t};var _require=require("../rubrics"),TACAT=_require.TACAT,TAPAL=_require.TAPAL,TASCORE=_require.TASCORE,PALS=_require.PALS,PALLABELS=_require.PALLABELS,analyzeProject=_require.analyzeProject,scoreToChartData=_require.scoreToChartData,getChartOptions=_require.getChartOptions,runAnalytics=_require.runAnalytics,getStatsFromNotation=_require.getStatsFromNotation,_require2=require("../utils/musicutils"),isCustomTemperament=_require2.isCustomTemperament;global.last=jest.fn(),global.isCustomTemperament=isCustomTemperament,global.TextEncoder=require("util").TextEncoder,global.TextDecoder=require("util").TextDecoder,jest.mock("../utils/musicutils",function(){return{isCustomTemperament:jest.fn(function(){return!1}),getTemperament:jest.fn(function(){return[]})}}),jest.mock("../utils/utils.js",function(){return{_:jest.fn(function(t){return t})}}),describe("rubrics.js test suite",function(){describe("analyzeProject",function(){it("should return an array of scores",function(){var t=analyzeProject({blocks:{blockList:[{name:"note",connections:[null,{}]},{name:"setbpm",connections:[null,{},{}]},{name:"random",connections:[null]}]}});expect(Array.isArray(t)).toBe(!0),expect(t.length).toBe(PALS.length)}),it("should ignore blocks in trash",function(){var t=analyzeProject({blocks:{blockList:[{name:"note",trash:!0,connections:[null,{}]},{name:"setbpm",trash:!1,connections:[null,{},{}]}]}});expect(t).toBeInstanceOf(Array)})}),describe("scoreToChartData",function(){it("should return a properly formatted chart data object",function(){var t=[10,20,30,40,50],e=scoreToChartData(t);expect(e).toHaveProperty("labels"),expect(e).toHaveProperty("datasets"),expect(Array.isArray(e.labels)).toBe(!0),expect(e.datasets).toHaveLength(1),expect(e.datasets[0]).toHaveProperty("data"),expect(e.datasets[0].data.length).toBe(t.length)})}),describe("getChartOptions",function(){it("should return an object with correct chart settings",function(){var t=jest.fn(),e=getChartOptions(t);expect(e).toHaveProperty("onAnimationComplete",t),expect(e).toHaveProperty("scaleShowLine",!0),expect(e).toHaveProperty("datasetFill",!0)})}),describe("runAnalytics",function(){it("should set correct properties on logo object",function(){var t={logo:{runningLilypond:!1,collectingStats:!1,notation:{notationStaging:{},notationDrumStaging:{}},runLogoCommands:jest.fn()},turtles:{turtleList:[{painter:{doClear:jest.fn()}}],getTurtleCount:jest.fn(function(){return 1}),getTurtle:jest.fn(function(t){return{painter:{doClear:jest.fn()}}})}};runAnalytics(t),expect(t.logo.runningLilypond).toBe(!0),expect(t.logo.collectingStats).toBe(!0),expect(t.logo.runLogoCommands).toHaveBeenCalled()})}),describe("getStatsFromNotation",function(){it("should return an object with musical statistics",function(){var t={logo:{notation:{notationStaging:{0:[["C4","D4"],3],1:[["E4","F4"],5]}},synth:{inTemperament:!1,_getFrequency:jest.fn(function(t){return 100*t.length})}},blocks:{blockList:[{name:"rest2",trash:!1,protoblock:{palette:{name:"ornaments"}}}]}},e=getStatsFromNotation(t);expect(e).toHaveProperty("numberOfNotes"),expect(e.numberOfNotes).toBeGreaterThan(0),expect(e).toHaveProperty("rests",1),expect(e).toHaveProperty("ornaments",1)})})});
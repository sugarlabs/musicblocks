"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,o,r,n,i,l){try{var a=e[i](l),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function _asyncToGenerator(a){return function(){var e=this,l=arguments;return new Promise(function(t,o){var r=a.apply(e,l);function n(e){asyncGeneratorStep(r,t,o,n,i,"next",e)}function i(e){asyncGeneratorStep(r,t,o,n,i,"throw",e)}n(void 0)})}}function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);var r=o.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var _require=require("../palette"),Palettes=_require.Palettes,initPalettes=_require.initPalettes;global.LEADING=10,global.DEFAULTPALETTE="default",global.MULTIPALETTES=["palette1","palette2"],global.PALETTEICONS={search:"<svg></svg>",palette1:"<svg></svg>",palette2:"<svg></svg>"},global.MULTIPALETTEICONS=["palette1","palette2"],global.SKIPPALETTES=[],global.toTitleCase=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},global._=function(e){return e},global.platformColor={selectorSelected:"#000",paletteBackground:"#fff",strokeColor:"#333",fillColor:"#666",paletteLabelBackground:"#ccc",hoverColor:"#ddd",paletteText:"#000"},describe("Palettes Class",function(){var e,o;beforeEach(function(){var t={style:{visibility:"visible"},children:[{children:[{},{children:[{},{parentNode:{removeChild:jest.fn()},appendChild:jest.fn(function(){return{}})}]}]}]};global.docById=jest.fn(function(e){return"PaletteBody"===e?{parentNode:{removeChild:jest.fn()}}:"palette"===e?_objectSpread(_objectSpread({},t),{},{children:[{children:[{},{children:[{},{removeChild:jest.fn(),appendChild:jest.fn(function(){return{}})}]}]}]}):{style:{},appendChild:jest.fn(),removeChild:jest.fn()}}),e={cellSize:50,blocks:{protoBlockDict:{},makeBlock:jest.fn(function(){return{}})},hideSearchWidget:jest.fn(),showSearchWidget:jest.fn(),palettes:{}},o=new Palettes(e)}),test("constructor initializes properties correctly",function(){expect(o.activity).toBe(e),expect(o.cellSize).toBe(Math.floor(25.5))}),test("init method sets halfCellSize",function(){o.init(),expect(o.halfCellSize).toBe(Math.floor(o.cellSize/2))}),test("setSize updates cellSize",function(){o.setSize(100),expect(o.cellSize).toBe(Math.floor(50.5))}),test("setMobile updates mobile flag and hides menus",function(){var e=jest.spyOn(o,"_hideMenus");o.setMobile(!0),expect(o.mobile).toBe(!0),expect(e).toHaveBeenCalled()}),test("getProtoNameAndPalette returns correct values",function(){e.blocks.protoBlockDict={testBlock:{name:"testBlock",palette:{name:"testPalette"},hidden:!1}},expect(o.getProtoNameAndPalette("testBlock")).toEqual(["testBlock","testPalette","testBlock"])}),test("hide and show functions modify visibility",function(){o.hide(),expect(docById("palette").style.visibility).toBe("hidden"),o.show(),expect(docById("palette").style.visibility).toBe("visible")})}),describe("initPalettes function",function(){var t;beforeEach(function(){t={add:jest.fn(),init_selectors:jest.fn(),makePalettes:jest.fn(),show:jest.fn()},global.BUILTINPALETTES=["default"]}),test("initPalettes initializes palettes correctly",_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,initPalettes(t);case 2:expect(t.add).toHaveBeenCalledWith("default"),expect(t.init_selectors).toHaveBeenCalled(),expect(t.makePalettes).toHaveBeenCalledWith(0),expect(t.show).toHaveBeenCalled();case 6:case"end":return e.stop()}},e)})))});
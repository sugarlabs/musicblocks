"use strict";function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function _slicedToArray(i,t){return _arrayWithHoles(i)||_iterableToArrayLimit(i,t)||_unsupportedIterableToArray(i,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(i,t){if(i){if("string"==typeof i)return _arrayLikeToArray(i,t);var s={}.toString.call(i).slice(8,-1);return"Object"===s&&i.constructor&&(s=i.constructor.name),"Map"===s||"Set"===s?Array.from(i):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(i,t):void 0}}function _arrayLikeToArray(i,t){(null==t||t>i.length)&&(t=i.length);for(var s=0,h=Array(t);s<t;s++)h[s]=i[s];return h}function _iterableToArrayLimit(i,t){var s=null==i?null:"undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(null!=s){var h,e,_,n,r=[],o=!0,a=!1;try{if(_=(s=s.call(i)).next,0===t){if(Object(s)!==s)return;o=!1}else for(;!(o=(h=_.call(s)).done)&&(r.push(h.value),r.length!==t);o=!0);}catch(i){a=!0,e=i}finally{try{if(!o&&null!=s.return&&(n=s.return(),Object(n)!==n))return}finally{if(a)throw e}}return r}}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var s=0;s<t.length;s++){var h=t[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,_toPropertyKey(h.key),h)}}function _createClass(i,t,s){return t&&_defineProperties(i.prototype,t),s&&_defineProperties(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i}function _toPropertyKey(i){var t=_toPrimitive(i,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(i,t){if("object"!=_typeof(i)||!i)return i;var s=i[Symbol.toPrimitive];if(void 0===s)return("string"===t?String:Number)(i);var h=s.call(i,t||"default");if("object"!=_typeof(h))return h;throw new TypeError("@@toPrimitive must return a primitive value.")}var SVG=function(){function i(){_classCallCheck(this,i),this._x=0,this._y=0,this._minX=1e4,this._minY=1e4,this._maxX=-1e4,this._maxY=-1e4,this._width=0,this._height=0,this.docks=[],this._scale=1,this._orientation=0,this._radius=8,this._strokeWidth=1,this._innies=[],this._outie=!1,this._innieX1=(9-this._strokeWidth)/2,this._innieY1=3,this._innieX2=(9-this._strokeWidth)/2,this._innieY2=(9-this._strokeWidth)/2,this._inniesSpacer=9,this._padding=this._innieY1+this._strokeWidth,this._slot=!0,this._cap=!1,this._tab=!0,this._bool=!1,this._slotX=10,this._slotY=2,this._tail=!1,this._porch=!1,this._porchX=this._innieX1+this._innieX2+4*this._strokeWidth,this._porchY=this._innieY2,this._expandX=30,this._expandX2=0,this._expandY=0,this._expandY2=0,this._clampCount=1,this._clampSlots=[1],this._slotSize=21,this._arm=!0,this._else=!1,this._draw_inniess=!0,this._fill="fill_color",this._stroke="stroke_color",this.margins=[0,0,0,0],this._fontSize=10,this._labelOffset=0}return _createClass(i,[{key:"setFontSize",value:function(i){this._fontSize=i}},{key:"setLabelOffset",value:function(i){this._labelOffset=i}},{key:"setDrawInniess",value:function(i){this._draw_inniess=i}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"clearDocks",value:function(){this.docks=[]}},{key:"setScale",value:function(i){this._scale=i}},{key:"setOrientation",value:function(i){this._orientation=i}},{key:"setClampCount",value:function(i){this._clampCount=i;var t=this._clampSlots.length;if(t<i)for(var s=0;s<i-t;s++)this._clampSlots.push(1)}},{key:"setClampSlots",value:function(i,t){i>this._clampCount.length-1&&this.setClampCount(i+1),this._clampSlots[i]=t}},{key:"setExpand",value:function(i,t,s,h){this._expandDimensions=[i,t,s,h];var e=_slicedToArray(this._expandDimensions,4);this._expandX=e[0],this._expandY=e[1],this._expandX2=e[2],this._expandY2=e[3]}},{key:"setstrokeWidth",value:function(i){this._strokeWidth=i,this._calc_porch_params()}},{key:"setColors",value:function(i){this._fill=i[0],this._stroke=i[1]}},{key:"setFillColor",value:function(i){this._fill=i}},{key:"setStrokeColor",value:function(i){this._stroke=i}},{key:"setInnies",value:function(i){for(var t=0;t<i.length;t++)this._innies.push(i[t])}},{key:"setOutie",value:function(i){this._outie=i}},{key:"setSlot",value:function(i){(this._slot=i)&&(this._cap=!1)}},{key:"setCap",value:function(i){(this._cap=i)&&(this._slot=!1)}},{key:"setTab",value:function(i){(this._tab=i)&&(this._tail=!1)}},{key:"setTail",value:function(i){(this._tail=i)&&(this._tab=!1)}},{key:"setPorch",value:function(i){this._porch=i}},{key:"setBoolean",value:function(i){this._bool=i}},{key:"setElse",value:function(i){this._else=i}},{key:"setArm",value:function(i){this._arm=i}},{key:"_resetMinMax",value:function(){this._minX=1e4,this._minY=1e4,this._maxX=-1e4,this._maxY=-1e4}},{key:"_checkMinMax",value:function(){this._x<this._minX&&(this._minX=this._x),this._y<this._minY&&(this._minY=this._y),this._x>this._maxX&&(this._maxX=this._x),this._y>this._maxY&&(this._maxY=this._y)}},{key:"_calculateXY",value:function(){var i=this._strokeWidth/2,t=this._strokeWidth/2+this._radius;return this.margins[0]=i+this._strokeWidth+.5,this.margins[1]=this._strokeWidth+.5,this._outie&&(i+=this._innieX1+this._innieX2,this.margins[0]+=this._innieX1+this._innieX2),this._cap?(t+=3*this._slotY,this.margins[1]+=3*this._slotY):this._slot&&(this.margins[1]+=this._slotY),this.margins[0]*=this._scale,this.margins[1]*=this._scale,this.margins[0]=Math.floor(this.margins[0]),this.margins[1]=Math.floor(this.margins[1]),[i,t]}},{key:"_calculateWH",value:function(i){this._width=i?(this._maxX-this._minX+this._strokeWidth)*this._scale:(this._maxX-this._minX)*this._scale,0===this.margins[2]?this.margins[2]=(this._strokeWidth+.5)*this._scale:this.margins[2]=this._width-this.margins[2],this._height=i?(this._maxY-this._minY+this._strokeWidth)*this._scale:(this._maxY-this._minY)*this._scale,0===this.margins[3]?this._tab?this.margins[3]=(this._slotY+this._strokeWidth+.5)*this._scale:this.margins[3]=(2*this._slotY+this._strokeWidth+.5)*this._scale:this.margins[3]=this._height-this.margins[3],this.margins[2]=Math.floor(this.margins[2]+.5),this.margins[3]=Math.floor(this.margins[3]+.5)}},{key:"_newPath",value:function(i,t){return'<path d="m'+(this._x=i)+" "+(this._y=t)+" "}},{key:"_closePath",value:function(){return'z" '}},{key:"text",value:function(i,t,s,h,e,_){var n;switch(this._x=i,this._y=t,this._checkMinMax(),this._x=i+h,this._y=t-s,this._checkMinMax(),e){case"left":case"start":n="start";break;case"middle":case"center":n="middle";break;case"right":case"end":n="end"}for(var r=t,o=_.split("\n"),a='<text style="font-size:'+s+"px;fill:"+platformColor.blockText+";font-family:sans-serif;text-anchor:"+n+'">',l=0;l<o.length;l++)a+='<tspan x="'+Math.floor(i+.5)+'" y="'+Math.floor(r+.5)+'">'+o[l]+"</tspan>",r+=s;return a+="</text>",a}},{key:"_lineTo",value:function(i,t){return this._checkMinMax(),this._x===i&&this._y===t?"":(this._x=i,this._y=t,this._checkMinMax(),"L "+i+" "+t+" ")}},{key:"_rLineTo",value:function(i,t){return 0===i&&0===t?"":this._lineTo(this._x+i,this._y+t)}},{key:"_arcTo",value:function(i,t,s,h,e,_){return this._checkMinMax(),0===s?this._lineTo(i,t):(this._x=i,this._y=t,this._checkMinMax(),"A "+s+" "+s+" "+h+" "+e+" "+_+" "+i+" "+t+" ")}},{key:"_rarcTo",value:function(i,t,s,h,e){return 0===this._radius?"":this._arcTo(this._x+i*this._radius,this._y+t*this._radius,this._radius,s,h,e)}},{key:"_corner",value:function(i,t,s,h,e,_,n,r){var o,a="";return 0<this._radius&&(o=this._radius/2,_&&(i*t==1?a+=this._rLineTo(i*o,0):r||(a+=this._rLineTo(0,t*o))),a+=this._arcTo(this._x+i*o,this._y+t*o,o,s,h,e),n&&(i*t==1?a+=this._rLineTo(0,t*o):r||(a+=this._rLineTo(i*o,0)))),a}},{key:"_iCorner",value:function(i,t,s,h,e,_,n){var r="",o=this._strokeWidth+this._radius/2;return _&&(r=i*t==-1?this._rLineTo(i*(o-this._strokeWidth),0):this._rLineTo(0,t*(o-this._strokeWidth))),r+=this._arcTo(this._x+i*o,this._y+t*o,o,s,h,e),n&&(r+=i*t==-1?this._rLineTo(0,t*(o-this._strokeWidth)):this._rLineTo(i*(o-this._strokeWidth),0)),r}},{key:"_doInnie",value:function(){return this.docks.push([(this._x+this._strokeWidth)*this._scale,(this._y+this._innieY2)*this._scale]),0===this.margins[2]&&(this.margins[1]=(this._y-this._innieY1)*this._scale,this.margins[2]=(this._x-this._innieX1-this._innieX2-2*this._strokeWidth)*this._scale),this.margins[3]=(this._y+this._innieY2+this._innieY1)*this._scale,this._rLineTo(-this._innieX1,0)+this._rLineTo(0,-this._innieY1)+this._rLineTo(-this._innieX2,0)+this._rLineTo(0,this._innieY2+2*this._innieY1)+this._rLineTo(this._innieX2,0)+this._rLineTo(0,-this._innieY1)+this._rLineTo(this._innieX1,0)}},{key:"_doOutie",value:function(){return this._outie?(this.docks.unshift([this._x*this._scale,this._y*this._scale]),this._rLineTo(0,-this._strokeWidth)+this._rLineTo(-this._innieX1-2*this._strokeWidth,0)+this._rLineTo(0,this._innieY1)+this._rLineTo(-this._innieX2+2*this._strokeWidth,0)+this._rLineTo(0,-this._innieY2-2*this._innieY1+2*this._strokeWidth)+this._rLineTo(this._innieX2-2*this._strokeWidth,0)+this._rLineTo(0,this._innieY1)+this._rLineTo(this._innieX1+2*this._strokeWidth,0)+this._rLineTo(0,-this._strokeWidth)):this._rLineTo(0,-this._innieY2)}},{key:"_doSlot",value:function(){return this._slot?(this.docks.push([(this._x+this._slotX/2)*this._scale,this._y*this._scale]),this._rLineTo(0,this._slotY)+this._rLineTo(this._slotX,0)+this._rLineTo(0,-this._slotY)):this._cap?(this.docks.push([(this._x+this._slotX/2)*this._scale,this._y*this._scale]),this._rLineTo(this._slotX/2,3*-this._slotY)+this._rLineTo(this._slotX/2,3*this._slotY)):this._rLineTo(this._slotX,0)}},{key:"_doTail",value:function(){return!this._outie&&this._tail?(this.docks.push([(this._x+this._slotX/2)*this._scale,this._y*this._scale]),this._rLineTo(-this._slotX/2,3*this._slotY)+this._rLineTo(-this._slotX/2,3*-this._slotY)):this._rLineTo(-this._slotX,0)}},{key:"_doTab",value:function(){return this._outie?this._rLineTo(-this._slotX,0):(this.docks.push([(this._x-this._slotX/2)*this._scale,(this._y+this._strokeWidth)*this._scale]),this._rLineTo(-this._strokeWidth,0)+this._rLineTo(0,this._slotY)+this._rLineTo(-this._slotX+2*this._strokeWidth,0)+this._rLineTo(0,-this._slotY)+this._rLineTo(-this._strokeWidth,0))}},{key:"_doPorch",value:function(i){return i?this._rLineTo(0,this._porchY+this._innieY1)+this._rLineTo(this._porchX-this._radius,0)+this._corner(1,1,90,0,1,!0,!0,!1):this._rLineTo(0,this._porchY-this._padding)+this._rLineTo(this._porchX-this._radius,0)+this._corner(1,1,90,0,1,!0,!0,!1)}},{key:"_startBoolean",value:function(i,t){var s=this._newPath(i,t);return this._radius-=this._strokeWidth,this.docks.push([this._x*this._scale,this._y*this._scale]),s+=this._rarcTo(1,-1,90,0,1),this._radius+=this._strokeWidth,s+=this._rLineTo(this._strokeWidth,0),s+=this._rLineTo(0,-this._expandY)}},{key:"_doBoolean",value:function(){return this.docks.push([(this._x-this._radius+this._strokeWidth)*this._scale,(this._y+this._radius)*this._scale]),this.margins[2]=(this._x-this._radius-this._strokeWidth)*this._scale,this._rarcTo(-1,1,90,0,0)+this._rarcTo(1,1,90,0,0)}},{key:"_endBoolean",value:function(i){var t="";return i||(t=this._rLineTo(1.5*-this._radius,0)),t+=this._rLineTo(0,-this._strokeWidth),t+=this._rLineTo(-this._strokeWidth,0),this._radius-=this._strokeWidth,t+=this._rarcTo(-1,-1,90,0,1),this._radius+=this._strokeWidth,t+=this._closePath(),this._calculateWH(!0),t+=this._style()}},{key:"_header",value:function(i){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+Math.floor(this._width+2*this._strokeWidth+.5)+'" height="'+Math.floor(this._height+.5)+'">'+this._transform(i)+'<filter id="dropshadow" height="130%">             <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>             <feOffset dx="2" dy="2" result="offsetblur"/>             <feComponentTransfer xmlns="http://www.w3.org/2000/svg">             <feFuncA type="linear" slope="0.2"/> </feComponentTransfer>             <feMerge> <feMergeNode/> <feMergeNode in="SourceGraphic"/> </feMerge>             </filter>'}},{key:"_transform",value:function(i){var t="";return 0!==this._orientation&&(t='<g transform = "rotate('+this._orientation+" "+this._width/2+" "+this._height/2+')">'),i?'<g transform="translate('+-this._minX+", "+-this._minY+')">':'<g transform="scale('+this._scale+", "+this._scale+')">'+t}},{key:"_footer",value:function(){return 0!==this._orientation?"</g></g></svg>":"</g></svg>"}},{key:"_style",value:function(){return'style="fill:'+this._fill+";fill-opacity:1;stroke:"+this._stroke+";stroke-width:"+this._strokeWidth+';stroke-linecap:round;stroke-opacity:1;filter:url(#dropshadow);" />'}},{key:"basicBlock",value:function(){this._resetMinMax();var i=this._calculateXY(),t=i[0],s=i[1];this.margins[2]=0,this.margins[3]=0;var h=this._newPath(t,s);h+=this._corner(1,-1,90,0,1,!0,!0,!1),h+=this._doSlot(),h+=this._rLineTo(this._expandX,0);var e=this._x;if(this._bool?(h+=this._rLineTo(3,0),h+=this._rLineTo(0,2)):h+=this._corner(1,1,90,0,1,!0,!0,!1),this._bool)h+=this._doBoolean();else if(0===this._innies.length)h+=this._rLineTo(0,this._padding);else for(var _=0;_<this._innies.length;_++)this._innies[_]&&(h+=this._doInnie()),0===_?h+=this._rLineTo(0,this._expandY):1===_&&0<this._expandY2&&(h+=this._rLineTo(0,this._expandY2)),0===_&&this._porch?h+=this._doPorch(!1):this._innies.length-1>_&&(h+=this._rLineTo(0,2*this._innieY2+this._inniesSpacer));this._bool?(h+=this._rLineTo(0,2),h+=this._rLineTo(-3,0)):h+=this._corner(-1,1,90,0,1,!0,!0,!1),h+=this._lineTo(e,this._y),h+=this._rLineTo(-this._expandX,0),this._tab?h+=this._doTab():h+=this._doTail(),h+=this._corner(-1,-1,90,0,1,!0,!0,!1),h+=this._rLineTo(0,-this._expandY),this._innies.includes(!0)&&(h+=this._lineTo(t,this._radius+this._innieY2+this._strokeWidth/2),h+=this._doOutie()),this._calculateWH(!0),h+=this._closePath(),h+=this._style();var n=this._width-this._scale*(this._innieX1+this._innieX2)-4*this._strokeWidth+this._labelOffset*this._scale,r=this._height/2+this._fontSize/(5/this._scale),o=this._innies.length;2<o&&2*Math.round(o/2)!==o&&(r-=2*this._fontSize),h+=this.text(n/this._scale,r/this._scale,this._fontSize,this._width,"right","block_label");var a=0;(this._slot||this._outie)&&(a=1);for(var l=1,d=0;d<this._innies.length;d++)this._innies[d]&&(r=this.docks[a][1]-this._fontSize/(8/this._scale)+this._scale,h+=this.text(n/this._scale,r/this._scale,this._fontSize/1.5,this._width,"right","arg_label_"+l),l+=1,a+=1);return h+=this._footer(),this._header(!1)+h}},{key:"basicBox",value:function(){this._resetMinMax(),this.setOutie(!0);var i=this._strokeWidth/2+this._innieX1+this._innieX2;this.margins[0]=(i+this._strokeWidth+.5)*this._scale,this.margins[1]=(this._strokeWidth+.5)*this._scale,this.margins[2]=0,this.margins[3]=0;var t=this._newPath(i,this._strokeWidth/2);t+=this._rLineTo(this._expandX,0),t+=this._rLineTo(0,2*this._radius+this._innieY2+this._expandY),t+=this._rLineTo(-this._expandX,0),t+=this._lineTo(i,this._radius+this._innieY2+this._strokeWidth/2),t+=this._doOutie(),t+=this._closePath(),this._calculateWH(!0),t+=this._style();var s=2*(this._innieX1+this._innieX2)+4*this._strokeWidth+this._labelOffset*this._scale,h=this._height/2+this._fontSize/2;return t+=this.text(s/this._scale,h/this._scale,this._fontSize,this._width,"left","block_label"),t+=this._footer(),this._header(!1)+t}},{key:"booleanAndOr",value:function(){this._resetMinMax();var i=this._startBoolean(this._strokeWidth/2,5.5*this._radius+this._strokeWidth/2+this._innieY2+this._inniesSpacer+this._expandY);i+=this._rLineTo(0,3.5*-this._radius-this._innieY2-this._inniesSpacer-this._strokeWidth),i+=this._rarcTo(1,-1,90,0,1),i+=this._rLineTo(this._radius/2+this._expandX,0);var t=this._x;i+=this._rLineTo(0,this._radius/2),i+=this._doBoolean(),i+=this._rLineTo(0,1.5*this._radius+this._innieY2+this._inniesSpacer),i+=this._rLineTo(0,this._expandY),i+=this._doBoolean(),i+=this._rLineTo(0,this._radius/2),i+=this._lineTo(t,this._y),i+=this._rLineTo(-this._expandX,0),i+=this._endBoolean(!1),this.margins[0]=(this._radius+this._strokeWidth+.5)*this._scale,this.margins[1]=this._strokeWidth*this._scale,this.margins[2]=this._strokeWidth*this._scale,this.margins[3]=this._strokeWidth*this._scale;var s=this._width-this._scale*(this._innieX1+this._innieX2)-4*this._strokeWidth+this._labelOffset*this._scale,h=this._height/2+this._fontSize/2;return i+=this.text(s/this._scale,h/this._scale,this._fontSize,this._width,"right","block_label"),i+=this._footer(),this._header(!1)+i}},{key:"booleanNot",value:function(i){this._resetMinMax();var t="",t=this._innies[0]||i?this._startBoolean(this._strokeWidth/2,1.25*this._radius+this._strokeWidth/2):this._startBoolean(this._strokeWidth/2,2*this._radius+this._strokeWidth/2);t+=this._rLineTo(0,-this._strokeWidth),this._innies[0]?t+=this._rLineTo(0,-this._radius/4):t+=i?this._rLineTo(0,-this._radius/4):this._rarcTo(1,-1,90,0,1),t+=this._rLineTo(this._radius/2+this._expandX,0);var s=this._x;this._innies[0]?(t+=this._rLineTo(0,this._radius),t+=this._doInnie(),t+=this._rLineTo(0,this._radius)):i?t+=this._rLineTo(0,2*this._radius):(t+=this._rLineTo(0,this._radius/2),t+=this._doBoolean(),t+=this._rLineTo(0,this._radius/2)),t+=this._lineTo(s,this._y),0<this._expandY2&&(t+=this._rLineTo(0,this._expandY2)),this._innies[0]?(t+=this._rLineTo(-this._radius/2-this._expandX,0),t+=this._rLineTo(0,-this._radius/4)):t+=i?this._rLineTo(-this._radius/2-this._expandX,0):this._rLineTo(-this._expandX,0),0<this._expandY2&&!i?t+=this._rLineTo(0,-this._expandY2):i&&(t+=this._rLineTo(0,-2)),t+=this._endBoolean(i),i?(this.margins[0]=(this._radius+this._strokeWidth+.5)*this._scale,this.margins[2]=(this._radius+this._strokeWidth+.5)*this._scale):(this.margins[0]=(this._strokeWidth+.5)*this._scale,this.margins[2]=(this._strokeWidth+.5)*this._scale),this.margins[1]=this._strokeWidth*this._scale,this.margins[3]=this._strokeWidth*this._scale;var h=this._width-2*(this._innieX1+this._innieX2)-4*this._strokeWidth+this._labelOffset*this._scale,e=this._height/2+this._fontSize/2;return t+=this.text(h/this._scale,e/this._scale,this._fontSize,this._width,"right","block_label"),t+=this._footer(),this._header(!1)+t}},{key:"booleanCompare",value:function(){this._resetMinMax();var i=2*this._radius+2*this._innieY2+this._inniesSpacer+this._strokeWidth/2+this._expandY,t=this._strokeWidth/2,s='<g transform="matrix(1,0,0,1,0,-'+2*this._radius+')"> ';s+=this._newPath(t,i+this._radius),this.docks.push([this._x*this._scale,(this._y-2*this._radius)*this._scale]),this._radius-=this._strokeWidth,s+=this._rarcTo(1,-1,90,0,1),this._radius+=this._strokeWidth,s+=this._rLineTo(this._strokeWidth,0),s+=this._rLineTo(0,-this._expandY),i=-2*this._innieY2-this._inniesSpacer-this._strokeWidth,s+=this._rLineTo(0,i+this._radius),s+=this._rarcTo(1,-1,90,0,1),s+=this._rLineTo(this._radius/2+this._expandX,0),s+=this._rLineTo(0,this._radius);var h=this._x;s+=this._doInnie(),this.docks[1][1]-=2*this._radius*this._scale,s+=this._rLineTo(0,this._expandY),this._porch?s+=this._doPorch(!1):s+=this._rLineTo(0,2*this._innieY2+this._inniesSpacer),s+=this._doInnie(),this.docks[2][1]-=2*this._radius*this._scale,s+=this._rLineTo(0,this._radius),s+=this._lineTo(h,this._y),s+=this._rLineTo(-this._expandX,0),s+=this._rLineTo(1.5*-this._radius,0),s+=this._rLineTo(0,-this._radius),s+=this._rLineTo(0,-this._strokeWidth),s+=this._rLineTo(-this._strokeWidth,0),this._radius-=this._strokeWidth,s+=this._rarcTo(-1,-1,90,0,1),this._radius+=this._strokeWidth,s+=this._closePath(),this._calculateWH(!0),s+=this._style(),s+="</g>",this.margins[0]=(this._radius+this._strokeWidth)*this._scale,this.margins[1]=this._strokeWidth*this._scale,this.margins[2]=this._strokeWidth*this._scale;var e=this._width-2*(this._innieX1+this._innieX2)-4*this._strokeWidth+this._labelOffset*this._scale,_=this._height/2+this._fontSize/2;return s+=this.text(e/this._scale,_/this._scale,this._fontSize,this._width,"right","block_label"),s+=this._footer(),this._header(!1)+s}},{key:"basicClamp",value:function(){var i,t,s=this._cap,h=this._slot;this._resetMinMax(),i=this._outie?this._strokeWidth/2+this._innieX1+this._innieX2:this._strokeWidth/2,t=this._cap?this._strokeWidth/2+this._radius+3*this._slotY:this._strokeWidth/2+this._radius,this.margins[0]=(i+this._strokeWidth+.5)*this._scale,this.margins[1]=(this._strokeWidth+.5)*this._scale,this.margins[2]=0,this.margins[3]=0;var e=this._newPath(i,t);e+=this._corner(1,-1,90,0,1,!0,!0,!1),e+=this._doSlot(),this._cap&&(this._slot=!0,this._cap=!1),e+=this._rLineTo(this._radius+this._strokeWidth,0);var _=this._x;if(e+=this._rLineTo(this._expandX,0),e+=this._corner(1,1,90,0,1,!0,!0,!1),this._innies[0])for(var n=0;n<this._innies.length;n++)this._innies[n]&&(e+=this._doInnie()),0===n?e+=this._rLineTo(0,this._expandY):1===n&&0<this._expandY2&&(e+=this._rLineTo(0,this._expandY2)),0===n&&this._porch?e+=this._doPorch(!1):this._innies.length-1>n&&(e+=this._rLineTo(0,2*this._innieY2+this._inniesSpacer));else this._bool?(e+=this._rLineTo(0,2*this._padding+this._strokeWidth),e+=this._doBoolean()):e+=this._rLineTo(0,this._padding),this.margins[2]=(this._x-this._strokeWidth+.5)*this._scale;for(var r,o,a=0;a<this._clampCount;a++){0<a&&(e+=this._rLineTo(this._expandX,0),e+=this._rLineTo(0,3*this._padding)),e+=this._corner(-1,1,90,0,1,!0,!0,!1),e+=this._lineTo(_,this._y);var l=this._outie;this._outie=!1,e+=this._doTab(),this._outie=l,e+=this._iCorner(-1,1,90,0,0,!0,!0),e+=this._rLineTo(0,this._padding),1<this._clampSlots[a]&&(e+=this._rLineTo(0,this._slotSize*(this._clampSlots[a]-1))),e+=this._rLineTo(0,this._expandY2),e+=this._iCorner(1,1,90,0,0,!0,!0);var d=this._slot;this._slot=!0,e+=this._doSlot(),this._slot=d,this.docks.pop(),e+=this._rLineTo(this._radius,0)}0<this._clampCount&&(e+=this._rLineTo(0,2*this._innieY1),e+=this._rLineTo(0,this._innieY1+3*this._strokeWidth)),e+=this._corner(-1,1,90,0,1,!0,!0,!1),0===this._clampCount&&(e+=this._lineTo(_,this._y)),e+=this._rLineTo(-this._radius-this._strokeWidth,0),this._tail?e+=this._doTail():e+=this._doTab(),this._cap=s,this._slot=h,e+=this._corner(-1,-1,90,0,1,!0,!0,!1),this._outie&&(e+=this._lineTo(i,this._radius+this._innieY2+this._strokeWidth/2),e+=this._doOutie()),e+=this._closePath(),this._calculateWH(!0),e+=this._style(),r=this._outie?10*this._strokeWidth+this._innieX1+this._innieX2+this._labelOffset*this._scale:8*this._strokeWidth+this._labelOffset*this._scale,this._cap?o=(this._strokeWidth/2+this._radius+this._slotY)*this._scale:1<this._innies.length?(o=(this._strokeWidth/2+this._radius)*this._scale/2,o+=this._fontSize):o=(this._strokeWidth/2+this._radius)*this._scale/2,o+=(this._fontSize+1)*this._scale,this._bool&&(o+=this._fontSize/2),e+=this.text(r/this._scale,o/this._scale,this._fontSize,this._width,"left","block_label");var c=1;if(this._bool){r=this._width-this._radius;for(var u=0;u<this._clampCount;u++)o=this.docks[u+2][1]-this._fontSize+3*this._strokeWidth,e+=this.text(r/this._scale,o/this._scale,this._fontSize/1.5,this._width,"right","arg_label_"+c),c+=1}var k=0;(this._slot||this._outie)&&(k=1),c=1,r=this._width-this._scale*(this._innieX1+this._innieX2)-4*this._strokeWidth;for(var f=0;f<this._innies.length;f++)this._innies[f]&&(o=this.docks[k][1]-this._fontSize/(8/this._scale)+this._scale,e+=this.text(r/this._scale,o/this._scale,this._fontSize/1.5,this._width,"right","arg_label_"+c),c+=1,k+=1);return e+=this._footer(),this._header(!1)+e}},{key:"argClamp",value:function(){var i;this._resetMinMax(),i=this._outie?this._strokeWidth/2+this._innieX1+this._innieX2:this._strokeWidth/2;var t=this._strokeWidth/2+this._radius;this.margins[0]=(i+this._strokeWidth+.5)*this._scale,this.margins[1]=(this._strokeWidth+.5)*this._scale,this.margins[2]=0,this.margins[3]=0;var s=this._newPath(i,t);s+=this._corner(1,-1,90,0,1,!0,!0,!1),s+=this._doSlot(),s+=this._rLineTo(this._radius+this._strokeWidth,0);var h=this._x;s+=this._rLineTo(this._expandX,0),s+=this._corner(1,1,90,0,1,!0,!0,!1),this._innies[0]?s+=this._doInnie():(s+=this._rLineTo(0,this._padding),this.margins[2]=(this._x-this._strokeWidth+.5)*this._scale),s+=this._corner(-1,1,90,0,1,!0,!0,!1),s+=this._lineTo(h,this._y),s+=this._iCorner(-1,1,90,0,0,!0,!0);var e=0;s+=this._doInnie();var _=this._slotSize*(this._clampSlots[0][e]-1);0<_&&(s+=this._rLineTo(0,_)),e+=1;for(var n,r,o=this._slotSize-this._innieY2,a=1;a<this._clampSlots[0].length;a++)s+=this._rLineTo(0,o),s+=this._doInnie(),0<(_=this._slotSize*(this._clampSlots[0][e]-1))&&(s+=this._rLineTo(0,_)),e+=1;return s+=this._rLineTo(0,this._expandY2),s+=this._iCorner(1,1,90,0,0,!0,!0),s+=this._rLineTo(this._radius,0),s+=this._rLineTo(0,2*this._innieY1),s+=this._rLineTo(0,this._innieY1+3*this._strokeWidth),s+=this._corner(-1,1,90,0,1,!0,!0,!1),s+=this._lineTo(h,this._y),s+=this._rLineTo(-this._radius-this._strokeWidth,0),this._tail?s+=this._doTail():s+=this._doTab(),s+=this._corner(-1,-1,90,0,1,!0,!0,!1),this._outie&&(s+=this._lineTo(i,this._radius+this._innieY2+this._strokeWidth/2),s+=this._doOutie()),s+=this._closePath(),this._calculateWH(!0),s+=this._style(),n=this._outie?10*this._strokeWidth+this._innieX1+this._innieX2:8*this._strokeWidth,r=this._cap?(this._strokeWidth/2+this._radius+this._slotY)*this._scale:(this._strokeWidth/2+this._radius)*this._scale/2,r+=(this._fontSize+1)*this._scale,this._bool&&(r+=this._fontSize/2),s+=this.text(n/this._scale,r/this._scale,this._fontSize,this._width,"left","block_label"),s+=this._footer(),this._header(!1)+s}},{key:"untilClamp",value:function(){this._resetMinMax();var i=this._strokeWidth/2,t=this._strokeWidth/2+this._radius;this.margins[0]=(i+this._strokeWidth+.5)*this._scale,this.margins[1]=(this._strokeWidth+.5)*this._scale,this.margins[2]=0,this.margins[3]=0;var s=this._newPath(i,t);s+=this._corner(1,-1,90,0,1,!0,!0,!1),s+=this._doSlot(),s+=this._rLineTo(this._radius+this._strokeWidth,0),s+=this._rLineTo(this._expandX,0);var h=this._x;s+=this._corner(1,1,90,0,1,!0,!0,!0),s+=this._rLineTo(0,2*this._innieY1),s+=this._corner(-1,1,90,0,1,!0,!0,!0),s+=this._lineTo(h,this._y),s+=this._rLineTo(-this._expandX,0),s+=this._doTab(),s+=this._iCorner(-1,1,90,0,0,!0,!0),s+=this._rLineTo(0,this._expandY),s+=this._iCorner(1,1,90,0,0,!0,!0),s+=this._doSlot(),this.docks.pop(),s+=this._rLineTo(this._radius,0),this._innies[0]?s+=this._doInnie():this.margins[2]=(this._x-this._strokeWidth+.5)*this._scale,s+=this._rLineTo(0,this._radius+this._expandY2),this._bool&&(s+=this._doBoolean()),s+=this._corner(-1,1,90,0,1,!0,!0,!1),s+=this._rLineTo(-this._radius-this._strokeWidth,0),s+=this._doTab(),s+=this._corner(-1,-1,90,0,1,!0,!0,!1),s+=this._closePath(),this._calculateWH(!0),s+=this._style();var e=4*this._strokeWidth,_=this.docks[2][1];return s+=this.text(e/this._scale,_/this._scale,this._fontSize,this._width,"left","block_label"),this._bool&&(e=this._width-this._radius,_=this.docks[1][1]-this._fontSize,s+=this.text(e/this._scale,_/this._scale,this._fontSize/1.5,this._width,"right","arg_label_1")),this._bool&&(e=this.docks[1][0],_=this.docks[1][1],this.docks[1][0]=this.docks[2][0],this.docks[1][1]=this.docks[2][1],this.docks[2][0]=e,this.docks[2][1]=_),s+=this._footer(),this._header(!1)+s}},{key:"statusBlock",value:function(){this._resetMinMax();var i=this._calculateXY(),t=i[0],s=i[1];this.margins[2]=0,this.margins[3]=0;var h=this._newPath(t,s);h+=this._corner(1,-1,90,0,1,!0,!0,!1),h+=this._rLineTo(this._expandX,0);var e=this._x;return h+=this._corner(1,1,90,0,1,!0,!0,!1),h+=this._rLineTo(0,this._expandY),h+=this._corner(-1,1,90,0,1,!0,!0,!1),h+=this._lineTo(e,this._y),h+=this._rLineTo(-this._expandX,0),h+=this._corner(-1,-1,90,0,1,!0,!0,!1),h+=this._rLineTo(0,-this._expandY),this._calculateWH(!0),h+=this._closePath(),h+=this._style(),h+=this._footer(),this._header(!1)+h}}]),i}();"undefined"!=typeof module&&module.exports&&(module.exports={SVG:SVG});
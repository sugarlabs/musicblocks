"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);var o=i.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var StatsWindow=function(){function i(t){var e=this;_classCallCheck(this,i),this.activity=t,this.isOpen=!0,this.widgetWindow=window.widgetWindows.windowFor(this,"stats","stats"),this.widgetWindow.clear(),this.widgetWindow.show(),this.widgetWindow.onclose=function(){e.isOpen=!1,e.activity.blocks.showBlocks(),e.widgetWindow.destroy(),e.activity.logo.statsWindow=null},this.doAnalytics(),this.widgetWindow.onmaximize=function(){e.widgetWindow.getWidgetBody().innerHTML="",e.widgetWindow.isMaximized()?(e.widgetWindow.getWidgetBody().style.display="flex",e.widgetWindow.getWidgetBody().style.justifyContent="space-between",e.widgetWindow.getWidgetBody().style.padding="0 2vw"):e.widgetWindow.getWidgetBody().style.padding="0 0",e.doAnalytics()},this.widgetWindow.sendToCenter()}return _createClass(i,[{key:"doAnalytics",value:function(){var i=this;this.activity.blocks.activeBlock=null;var t=docById("myChart").getContext("2d");this.activity.loading=!0,document.body.style.cursor="wait";var o=null,e=analyzeProject(this.activity);runAnalytics(this.activity);var n=scoreToChartData(e),s=getChartOptions(function(){var t=o.toBase64Image(),e=new Image;e.src=t,i.widgetWindow.isMaximized()?e.width=i.widgetWindow.getWidgetFrame().getBoundingClientRect().height-80:e.width=200,i.widgetWindow.getWidgetBody().appendChild(e),i.activity.blocks.hideBlocks(),i.activity.showBlocksAfterRun=!1,document.body.style.cursor="default"}),o=new Chart(t).Radar(n,s);this.jsonObject=document.createElement("ul"),this.jsonObject.style.float="left",this.widgetWindow.getWidgetBody().appendChild(this.jsonObject)}},{key:"displayInfo",value:function(t){var e=t.lowestNote[2]+.5,i=t.highestNote[2]+.5;this.jsonObject.innerHTML="<li>duples: ".concat(t.duples,"</li>\n            <li>triplets: ").concat(t.triplets,"</li>\n            <li>quintuplets: ").concat(t.quintuplets,'</li>\n            <li style="white-space: pre-wrap; width: 150px">pitch names: ').concat(Array.from(t.pitchNames).join(", "),"</li>\n            <li>number of notes: ").concat(t.numberOfNotes,'</li>\n            <li style="white-space: pre-wrap; width: 150px">lowest note: ').concat(t.lowestNote[0],",").concat(e.toFixed(0),'Hz</li>\n            <li style="white-space: pre-wrap; width: 150px">highest note: ').concat(t.highestNote[0],",").concat(i.toFixed(0),"Hz</li>\n            <li>rests used: ").concat(t.rests,"</li>\n            <li>ornaments used: ").concat(t.ornaments,"</li>")}}]),i}();